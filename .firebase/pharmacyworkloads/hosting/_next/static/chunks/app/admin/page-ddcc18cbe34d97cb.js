(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{1003:(e,s,a)=>{Promise.resolve().then(a.bind(a,1311))},1311:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>X});var l=a(5155),i=a(2115);function n(e){let{activeTab:s,setActiveTab:a}=e;return(0,l.jsx)("div",{className:"tabs is-boxed",children:(0,l.jsx)("ul",{children:[{id:"dashboard",label:"Dashboard",icon:"fas fa-tachometer-alt"},{id:"organizations",label:"Organizations",icon:"fas fa-building"},{id:"hospitals",label:"Hospitals",icon:"fas fa-hospital"},{id:"departments",label:"Departments",icon:"fas fa-sitemap"},{id:"wards",label:"Wards",icon:"fas fa-bed"},{id:"staff",label:"Staff",icon:"fas fa-users"},{id:"workloads",label:"Workloads",icon:"fas fa-clipboard-list"},{id:"reports",label:"Reports",icon:"fas fa-chart-bar"},{id:"audit",label:"Audit Logs",icon:"fas fa-history"}].map(e=>(0,l.jsx)("li",{className:s===e.id?"is-active":"",onClick:()=>a(e.id),children:(0,l.jsxs)("a",{children:[(0,l.jsx)("span",{className:"icon is-small",children:(0,l.jsx)("i",{className:e.icon})}),(0,l.jsx)("span",{children:e.label})]})},e.id))})})}function t(){return(0,l.jsxs)("div",{className:"columns is-multiline",children:[(0,l.jsx)("div",{className:"column is-3",children:(0,l.jsxs)("div",{className:"notification is-primary has-text-centered",children:[(0,l.jsx)("p",{className:"heading",children:"Medication Histories"}),(0,l.jsx)("p",{className:"title",children:"126"})]})}),(0,l.jsx)("div",{className:"column is-3",children:(0,l.jsxs)("div",{className:"notification is-info has-text-centered",children:[(0,l.jsx)("p",{className:"heading",children:"Medication Reviews"}),(0,l.jsx)("p",{className:"title",children:"258"})]})}),(0,l.jsx)("div",{className:"column is-3",children:(0,l.jsxs)("div",{className:"notification is-success has-text-centered",children:[(0,l.jsx)("p",{className:"heading",children:"TTOs"}),(0,l.jsx)("p",{className:"title",children:"48"})]})}),(0,l.jsx)("div",{className:"column is-3",children:(0,l.jsxs)("div",{className:"notification is-warning has-text-centered",children:[(0,l.jsx)("p",{className:"heading",children:"Assigned Staff"}),(0,l.jsx)("p",{className:"title",children:"22"})]})})]})}function c(){let e=e=>{switch(e){case"Created":return"is-success";case"Updated":return"is-info";case"Deleted":return"is-danger";case"Assigned":return"is-warning";case"Completed":return"is-primary";default:return"is-light"}};return(0,l.jsx)("div",{className:"table-container",children:(0,l.jsxs)("table",{className:"table is-fullwidth is-hoverable",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Time"}),(0,l.jsx)("th",{children:"User"}),(0,l.jsx)("th",{children:"Action"}),(0,l.jsx)("th",{children:"Details"})]})}),(0,l.jsx)("tbody",{children:[{id:1,time:"10:45 AM",user:"John Smith",action:"Created",details:"Added 12 medication histories for Ward 1"},{id:2,time:"10:30 AM",user:"Emma Wilson",action:"Updated",details:"Updated TTO count for Ward 5"},{id:3,time:"10:15 AM",user:"Admin User",action:"Assigned",details:"Assigned Michael Brown to Ward 9"},{id:4,time:"09:50 AM",user:"Sarah Johnson",action:"Completed",details:"Completed medication reviews for Ward 10"},{id:5,time:"09:30 AM",user:"David Lee",action:"Deleted",details:"Removed duplicate entry for Ward 13"}].map(s=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:s.time}),(0,l.jsx)("td",{children:s.user}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{className:"tag ".concat(e(s.action)),children:s.action})}),(0,l.jsx)("td",{children:s.details})]},s.id))})]})})}function d(){let[e,s]=(0,i.useState)([{id:1,title:"System Update",content:"The system will be updated tonight between 2-3 AM. Please save all work before leaving.",type:"info"},{id:2,title:"Staff Meeting",content:"Reminder: Staff meeting today at 2:00 PM in Conference Room B.",type:"warning"},{id:3,title:"New Protocol",content:"New medication reconciliation protocol is now in effect. Please review the updated guidelines.",type:"primary"}]),[a,n]=(0,i.useState)(""),t=a=>{s(e.filter(e=>e.id!==a))};return(0,l.jsxs)("div",{className:"box mb-5",children:[(0,l.jsx)("h3",{className:"title is-4",children:"Notices"}),e.map(e=>(0,l.jsxs)("article",{className:"message is-".concat(e.type),children:[(0,l.jsxs)("div",{className:"message-header",children:[(0,l.jsx)("p",{children:e.title}),(0,l.jsx)("button",{className:"delete","aria-label":"delete",onClick:()=>t(e.id)})]}),(0,l.jsx)("div",{className:"message-body",children:e.content})]},e.id)),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("textarea",{className:"textarea is-small",placeholder:"Add a new notice...",value:a,onChange:e=>n(e.target.value)})}),(0,l.jsx)("div",{className:"control mt-2",children:(0,l.jsx)("button",{className:"button is-small is-primary",onClick:()=>{a.trim()&&(s([{id:Date.now(),title:"New Announcement",content:a,type:"info"},...e]),n(""))},children:"Post Notice"})})]})]})}function r(){return(0,l.jsxs)("div",{className:"box",children:[(0,l.jsx)("h3",{className:"title is-4",children:"Staff On Duty"}),(0,l.jsxs)("div",{className:"content",children:[(0,l.jsx)("h5",{className:"has-text-primary",children:"AM Shift"}),(0,l.jsx)("ul",{children:[{id:1,name:"John Smith",department:"COTE"},{id:2,name:"Emma Wilson",department:"MEDS"},{id:3,name:"Michael Brown",department:"SURG"},{id:4,name:"David Lee",department:"EMRG"}].map(e=>(0,l.jsxs)("li",{children:[e.name," - ",e.department]},e.id))}),(0,l.jsx)("h5",{className:"has-text-info",children:"PM Shift"}),(0,l.jsx)("ul",{children:[{id:5,name:"Emma Wilson",department:"COTE"},{id:6,name:"Sarah Johnson",department:"MEDS"},{id:7,name:"Michael Brown",department:"SURG"},{id:8,name:"David Lee",department:"EMRG"}].map(e=>(0,l.jsxs)("li",{children:[e.name," - ",e.department]},e.id))})]})]})}function o(){return(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsxs)("div",{className:"column is-8",children:[(0,l.jsxs)("div",{className:"box",children:[(0,l.jsx)("h3",{className:"title is-4",children:"Today's Overview"}),(0,l.jsx)(t,{}),(0,l.jsx)("h4",{className:"title is-5 mt-5",children:"Department Workload"}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("div",{className:"is-flex is-justify-content-space-between mb-1",children:[(0,l.jsx)("span",{children:"COTE"}),(0,l.jsx)("span",{children:"35%"})]}),(0,l.jsx)("progress",{className:"progress is-primary",value:"35",max:"100",children:"COTE: 35%"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("div",{className:"is-flex is-justify-content-space-between mb-1",children:[(0,l.jsx)("span",{children:"MEDS"}),(0,l.jsx)("span",{children:"28%"})]}),(0,l.jsx)("progress",{className:"progress is-link",value:"28",max:"100",children:"MEDS: 28%"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("div",{className:"is-flex is-justify-content-space-between mb-1",children:[(0,l.jsx)("span",{children:"SURG"}),(0,l.jsx)("span",{children:"22%"})]}),(0,l.jsx)("progress",{className:"progress is-info",value:"22",max:"100",children:"SURG: 22%"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("div",{className:"is-flex is-justify-content-space-between mb-1",children:[(0,l.jsx)("span",{children:"EMRG"}),(0,l.jsx)("span",{children:"15%"})]}),(0,l.jsx)("progress",{className:"progress is-warning",value:"15",max:"100",children:"EMRG: 15%"})]})]}),(0,l.jsxs)("div",{className:"box",children:[(0,l.jsx)("h3",{className:"title is-4",children:"Recent Activity"}),(0,l.jsx)(c,{})]})]}),(0,l.jsxs)("div",{className:"column is-4",children:[(0,l.jsx)(d,{}),(0,l.jsx)(r,{})]})]})}function m(e){let{filter:s,setFilter:a}=e,i=e=>{let{name:l,value:i}=e.target;a({...s,[l]:i})};return(0,l.jsxs)("aside",{className:"menu",children:[(0,l.jsx)("p",{className:"menu-label",children:"Filters"}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Type"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-small is-fullwidth",children:(0,l.jsxs)("select",{name:"type",value:s.type,onChange:i,children:[(0,l.jsx)("option",{value:"all",children:"All Types"}),(0,l.jsx)("option",{value:"NHS Trust",children:"NHS Trust"}),(0,l.jsx)("option",{value:"NHS Foundation Trust",children:"NHS Foundation Trust"}),(0,l.jsx)("option",{value:"Private Healthcare",children:"Private Healthcare"})]})})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Status"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-small is-fullwidth",children:(0,l.jsxs)("select",{name:"status",value:s.status,onChange:i,children:[(0,l.jsx)("option",{value:"all",children:"All Status"}),(0,l.jsx)("option",{value:"active",children:"Active"}),(0,l.jsx)("option",{value:"inactive",children:"Inactive"})]})})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Search"}),(0,l.jsxs)("div",{className:"control has-icons-left",children:[(0,l.jsx)("input",{className:"input is-small",type:"text",placeholder:"Search",name:"search",value:s.search,onChange:i}),(0,l.jsx)("span",{className:"icon is-small is-left",children:(0,l.jsx)("i",{className:"fas fa-search"})})]})]})]})}function h(e){let{organizations:s,onEdit:a,onDelete:i}=e;return(0,l.jsx)("div",{className:"table-container",children:(0,l.jsxs)("table",{className:"table is-fullwidth is-hoverable",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Name"}),(0,l.jsx)("th",{children:"Type"}),(0,l.jsx)("th",{children:"Contact"}),(0,l.jsx)("th",{children:"Hospitals"}),(0,l.jsx)("th",{children:"Status"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:0===s.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:6,className:"has-text-centered py-4",children:"No organizations found. Try adjusting your filters or add a new organization."})}):s.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"is-flex is-align-items-center",children:[(0,l.jsx)("span",{className:"icon mr-2",children:(0,l.jsx)("i",{className:"fas fa-building"})}),(0,l.jsx)("span",{children:e.name})]})}),(0,l.jsx)("td",{children:e.type}),(0,l.jsxs)("td",{children:[(0,l.jsx)("div",{children:e.contactEmail}),(0,l.jsx)("div",{className:"has-text-grey is-size-7",children:e.contactPhone})]}),(0,l.jsx)("td",{children:e.hospitalCount}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{className:"tag ".concat(e.active?"is-success":"is-danger"),children:e.active?"Active":"Inactive"})}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"buttons are-small",children:[(0,l.jsx)("button",{className:"button is-info",title:"Edit",onClick:()=>a(e),children:(0,l.jsx)("span",{className:"icon is-small",children:(0,l.jsx)("i",{className:"fas fa-edit"})})}),(0,l.jsx)("button",{className:"button is-danger",title:"Delete",onClick:()=>i(e.id),children:(0,l.jsx)("span",{className:"icon is-small",children:(0,l.jsx)("i",{className:"fas fa-trash"})})})]})})]},e.id))})]})})}var u=a(6074);function x(e){let{isOpen:s,mode:a,organization:n,onClose:t,onSave:c}=e,[d,r]=(0,i.useState)({id:"",name:"",type:"NHS Trust",contactEmail:"",contactPhone:"",active:!0,hospitalCount:0}),[o,m]=(0,i.useState)(""),[h,x]=(0,i.useState)([]),[p,j]=(0,i.useState)(!1);(0,i.useEffect)(()=>{x((0,u.N_)()),"edit"===a&&n?r({...n}):r({id:"",name:"",type:"NHS Trust",contactEmail:"",contactPhone:"",active:!0,hospitalCount:0}),m(""),j(!1)},[a,n,s]);let N=e=>{let{name:s,value:a,type:l}=e.target;r({...d,[s]:"checkbox"===l?e.target.checked:a})},v=()=>d.name.trim()?d.contactEmail.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.contactEmail.trim())?!!d.type||(m("Organization type is required"),!1):(m("Please enter a valid email address"),!1):(m("Contact email is required"),!1):(m("Organization name is required"),!1),f=async e=>{if(e.preventDefault(),v()){j(!0);try{await c(d)}catch(e){console.error("Error saving organization:",e),m("An error occurred while saving. Please try again."),j(!1)}}};return s?(0,l.jsxs)("div",{className:"modal ".concat(s?"is-active":""),children:[(0,l.jsx)("div",{className:"modal-background",onClick:t}),(0,l.jsxs)("div",{className:"modal-card",children:[(0,l.jsxs)("header",{className:"modal-card-head",children:[(0,l.jsx)("p",{className:"modal-card-title",children:"add"===a?"Add New Organization":"Edit Organization"}),(0,l.jsx)("button",{className:"delete","aria-label":"close",onClick:t,disabled:p})]}),(0,l.jsxs)("form",{onSubmit:f,children:[(0,l.jsxs)("section",{className:"modal-card-body",children:[o&&(0,l.jsxs)("div",{className:"notification is-danger",children:[(0,l.jsx)("button",{className:"delete",type:"button",onClick:()=>m("")}),o]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Organization Name"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"text",name:"name",value:d.name,onChange:N,placeholder:"Enter organization name",required:!0})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Type"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-fullwidth",children:(0,l.jsxs)("select",{name:"type",value:d.type,onChange:N,required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select type"}),h.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Contact Email"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"email",name:"contactEmail",value:d.contactEmail,onChange:N,placeholder:"Enter contact email",required:!0})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Contact Phone"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"text",name:"contactPhone",value:d.contactPhone,onChange:N,placeholder:"Enter contact phone"})})]}),(0,l.jsx)("div",{className:"field",children:(0,l.jsx)("div",{className:"control",children:(0,l.jsxs)("label",{className:"checkbox",children:[(0,l.jsx)("input",{type:"checkbox",name:"active",checked:d.active,onChange:N}),"\xa0Active"]})})})]}),(0,l.jsxs)("footer",{className:"modal-card-foot",children:[(0,l.jsx)("button",{type:"submit",className:"button is-primary ".concat(p?"is-loading":""),disabled:p,children:"add"===a?"Add Organization":"Save Changes"}),(0,l.jsx)("button",{type:"button",className:"button",onClick:t,disabled:p,children:"Cancel"})]})]})]})]}):null}var p=a(8209);let j=()=>(0,l.jsxs)("div",{className:"has-text-centered p-6",children:[(0,l.jsx)("div",{className:"loader is-loading",style:{height:"80px",width:"80px",margin:"0 auto"}}),(0,l.jsx)("p",{className:"mt-4",children:"Loading..."})]}),N=e=>{let{type:s,message:a,onClose:i}=e;return(0,l.jsxs)("div",{className:"notification is-".concat(s," mb-4"),children:[i&&(0,l.jsx)("button",{className:"delete",onClick:i}),(0,l.jsx)("p",{children:a})]})};function v(){let{organizations:e,loading:s,error:a,filter:n,setFilter:t,addNewOrganization:c,updateExistingOrganization:d,removeOrganization:r}=(0,p.G)(),[o,u]=(0,i.useState)(!1),[v,f]=(0,i.useState)(null),[g,b]=(0,i.useState)("add"),[y,C]=(0,i.useState)(null),w=async e=>{if(confirm("Are you sure you want to delete this organization?"))try{await r(e),C({success:!0,message:"Organization deleted successfully"})}catch(e){C({success:!1,message:"Failed to delete organization"})}},S=async e=>{try{if("add"===g){let{id:s,hospitalCount:a,createdAt:l,updatedAt:i,...n}=e;await c(n),C({success:!0,message:"Organization added successfully"})}else await d(e.id,e),C({success:!0,message:"Organization updated successfully"});u(!1)}catch(e){C({success:!1,message:"Failed to ".concat("add"===g?"add":"update"," organization")})}};return y&&setTimeout(()=>{C(null)},5e3),(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column is-3",children:(0,l.jsxs)("div",{className:"box",children:[(0,l.jsxs)("div",{className:"block",children:[(0,l.jsx)("h3",{className:"title is-4 mb-5",children:"Organizations"}),(0,l.jsx)("h5",{className:"subtitle is-6",children:"Manage healthcare organizations"})]}),(0,l.jsx)("div",{className:"block",children:(0,l.jsxs)("button",{className:"button is-primary",onClick:()=>{f(null),b("add"),u(!0)},children:[(0,l.jsx)("span",{className:"icon",children:(0,l.jsx)("i",{className:"fas fa-plus"})}),(0,l.jsx)("span",{children:"Add Organization"})]})}),(0,l.jsx)("div",{className:"block",children:(0,l.jsx)(m,{filter:n,setFilter:t})})]})}),(0,l.jsxs)("div",{className:"column is-9",children:[y&&(0,l.jsx)(N,{type:y.success?"success":"danger",message:y.message,onClose:()=>C(null)}),s?(0,l.jsx)(j,{}):a?(0,l.jsxs)("div",{className:"notification is-danger",children:[(0,l.jsx)("button",{className:"delete",onClick:()=>{}}),a]}):(0,l.jsx)("div",{className:"box",children:(0,l.jsx)(h,{organizations:e,onEdit:e=>{f(e),b("edit"),u(!0)},onDelete:w})})]}),(0,l.jsx)(x,{isOpen:o,mode:g,organization:v,onClose:()=>u(!1),onSave:S})]})}var f=a(1012);function g(e){let{filter:s,setFilter:a}=e,{organizations:i}=(0,f.P)(),n=e=>{let{name:l,value:i}=e.target;a({...s,[l]:i})};return(0,l.jsxs)("aside",{className:"menu",children:[(0,l.jsx)("p",{className:"menu-label",children:"Filters"}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Organization"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-small is-fullwidth",children:(0,l.jsxs)("select",{name:"organization",value:s.organization,onChange:n,children:[(0,l.jsx)("option",{value:"all",children:"All Organizations"}),i.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Status"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-small is-fullwidth",children:(0,l.jsxs)("select",{name:"status",value:s.status,onChange:n,children:[(0,l.jsx)("option",{value:"all",children:"All Status"}),(0,l.jsx)("option",{value:"active",children:"Active"}),(0,l.jsx)("option",{value:"inactive",children:"Inactive"})]})})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Search"}),(0,l.jsxs)("div",{className:"control has-icons-left",children:[(0,l.jsx)("input",{className:"input is-small",type:"text",placeholder:"Search by name, city, or postcode",name:"search",value:s.search,onChange:n}),(0,l.jsx)("span",{className:"icon is-small is-left",children:(0,l.jsx)("i",{className:"fas fa-search"})})]})]})]})}var b=a(8017),y=a.n(b);function C(e){var s;let{hospital:a,onEdit:i,onDelete:n}=e;return(0,l.jsxs)("div",{className:"card ".concat(y().hoverCard),children:[(0,l.jsxs)("div",{className:"card-content",children:[(0,l.jsxs)("div",{className:"media",children:[(0,l.jsx)("div",{className:"media-left",children:(0,l.jsx)("figure",{className:"image is-48x48",children:(0,l.jsx)("i",{className:"fas fa-hospital fa-3x has-text-info"})})}),(0,l.jsxs)("div",{className:"media-content",children:[(0,l.jsx)("p",{className:"title is-4 mb-5",children:a.name}),(0,l.jsx)("p",{className:"subtitle is-6",children:(null===(s=a.organization)||void 0===s?void 0:s.name)||"Unknown Organization"})]})]}),(0,l.jsxs)("div",{className:"content",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("i",{className:"fas fa-map-marker-alt"})," ",a.address,", ",a.city,", ",a.postcode,(0,l.jsx)("br",{}),(0,l.jsx)("i",{className:"fas fa-phone"})," ",a.contactNumber,(0,l.jsx)("br",{}),(0,l.jsx)("i",{className:"fas fa-bed"})," ",a.beds," beds"]}),(0,l.jsxs)("div",{className:"tags",children:[(0,l.jsxs)("span",{className:"tag is-success",children:[a.departments||0," Departments"]}),(0,l.jsxs)("span",{className:"tag is-primary",children:[a.wards||0," Wards"]}),(0,l.jsx)("span",{className:"tag ".concat(a.active?"is-info":"is-danger"),children:a.active?"Active":"Inactive"})]})]})]}),(0,l.jsxs)("footer",{className:"card-footer",children:[(0,l.jsxs)("a",{className:"card-footer-item has-text-info",onClick:i,children:[(0,l.jsx)("i",{className:"fas fa-edit mr-1"})," Edit"]}),(0,l.jsxs)("a",{className:"card-footer-item has-text-danger",onClick:n,children:[(0,l.jsx)("i",{className:"fas fa-trash mr-1"})," Delete"]})]})]})}function w(e){let{isOpen:s,mode:a,hospital:n,onClose:t,onSave:c}=e,{organizations:d}=(0,f.P)(),r={id:"",name:"",organization:{id:"",name:""},address:"",city:"",postcode:"",contactNumber:"",contactEmail:"",beds:0,active:!0,departments:0,wards:0,staff:0},[o,m]=(0,i.useState)(r),[h,u]=(0,i.useState)(""),[x,p]=(0,i.useState)(!1);(0,i.useEffect)(()=>{"edit"===a&&n?m({...n}):m({...r,organization:d.length>0?{id:d[0].id,name:d[0].name}:{id:"",name:""}}),u(""),p(!1)},[a,n,d,s]);let j=e=>{let{name:s,value:a,type:l}=e.target;if("organizationId"===s){let e=d.find(e=>e.id===a);e&&m({...o,organization:{id:e.id,name:e.name}})}else m({...o,[s]:"checkbox"===l?e.target.checked:"number"===l?parseInt(a):a})},N=()=>o.name.trim()?o.organization.id?o.address.trim()?o.city.trim()?o.postcode.trim()?!o.contactEmail||!!v(o.contactEmail)||(u("Please enter a valid email address"),!1):(u("Postcode is required"),!1):(u("City is required"),!1):(u("Address is required"),!1):(u("Organization is required"),!1):(u("Hospital name is required"),!1),v=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);return s?(0,l.jsxs)("div",{className:"modal ".concat(s?"is-active":""),children:[(0,l.jsx)("div",{className:"modal-background",onClick:t}),(0,l.jsxs)("div",{className:"modal-card",children:[(0,l.jsxs)("header",{className:"modal-card-head",children:[(0,l.jsx)("p",{className:"modal-card-title",children:"add"===a?"Add New Hospital":"Edit Hospital"}),(0,l.jsx)("button",{className:"delete","aria-label":"close",onClick:t,disabled:x})]}),(0,l.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),N()){p(!0);try{c(o)}catch(e){console.error("Error saving hospital:",e),u("An error occurred while saving. Please try again."),p(!1)}}},children:[(0,l.jsxs)("section",{className:"modal-card-body",children:[h&&(0,l.jsxs)("div",{className:"notification is-danger",children:[(0,l.jsx)("button",{className:"delete",onClick:()=>u("")}),h]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Hospital Name"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"text",name:"name",value:o.name,onChange:j,placeholder:"Enter hospital name",required:!0})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Organization"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-fullwidth",children:(0,l.jsxs)("select",{name:"organizationId",value:o.organization.id,onChange:j,required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select an organization"}),d.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]}),(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Address"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"text",name:"address",value:o.address,onChange:j,placeholder:"Street address",required:!0})})]})}),(0,l.jsx)("div",{className:"column",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"City"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"text",name:"city",value:o.city,onChange:j,placeholder:"City",required:!0})})]})})]}),(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Postcode"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"text",name:"postcode",value:o.postcode,onChange:j,placeholder:"Postcode",required:!0})})]})}),(0,l.jsx)("div",{className:"column",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Beds"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"number",name:"beds",value:o.beds,onChange:j,placeholder:"Number of beds",min:"0"})})]})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Contact Number"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"text",name:"contactNumber",value:o.contactNumber,onChange:j,placeholder:"Contact phone number"})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Contact Email"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"email",name:"contactEmail",value:o.contactEmail,onChange:j,placeholder:"Contact email address"})})]}),(0,l.jsx)("div",{className:"field",children:(0,l.jsx)("div",{className:"control",children:(0,l.jsxs)("label",{className:"checkbox",children:[(0,l.jsx)("input",{type:"checkbox",name:"active",checked:o.active,onChange:j}),"\xa0Active"]})})})]}),(0,l.jsxs)("footer",{className:"modal-card-foot",children:[(0,l.jsx)("button",{type:"submit",className:"button is-primary ".concat(x?"is-loading":""),disabled:x,children:"add"===a?"Add Hospital":"Save Changes"}),(0,l.jsx)("button",{type:"button",className:"button",onClick:t,disabled:x,children:"Cancel"})]})]})]})]}):null}let S=e=>{let{isOpen:s,title:a,message:i,confirmText:n="Confirm",cancelText:t="Cancel",onConfirm:c,onCancel:d,isLoading:r=!1,confirmButtonClass:o="is-danger"}=e;return s?(0,l.jsxs)("div",{className:"modal is-active",children:[(0,l.jsx)("div",{className:"modal-background",onClick:d}),(0,l.jsxs)("div",{className:"modal-card",children:[(0,l.jsxs)("header",{className:"modal-card-head",children:[(0,l.jsx)("p",{className:"modal-card-title",children:a}),(0,l.jsx)("button",{className:"delete","aria-label":"close",onClick:d,disabled:r})]}),(0,l.jsx)("section",{className:"modal-card-body",children:(0,l.jsx)("p",{children:i})}),(0,l.jsxs)("footer",{className:"modal-card-foot",children:[(0,l.jsx)("button",{className:"button ".concat(o," ").concat(r?"is-loading":""),onClick:c,disabled:r,children:n}),(0,l.jsx)("button",{className:"button",onClick:d,disabled:r,children:t})]})]})]}):null};function k(){let{hospitals:e,loading:s,error:a,filter:n,setFilter:t,addNewHospital:c,updateExistingHospital:d,removeHospital:r}=(0,f.P)(),[o,m]=(0,i.useState)(!1),[h,u]=(0,i.useState)(null),[x,p]=(0,i.useState)("add"),[v,b]=(0,i.useState)(null),[y,k]=(0,i.useState)({isOpen:!1,hospitalId:"",hospitalName:""}),z=e=>{u(e),p("edit"),m(!0)},_=(e,s)=>{k({isOpen:!0,hospitalId:e,hospitalName:s})},D=async()=>{try{await r(y.hospitalId),b({success:!0,message:'Hospital "'.concat(y.hospitalName,'" deleted successfully')}),k({isOpen:!1,hospitalId:"",hospitalName:""})}catch(e){b({success:!1,message:"Failed to delete hospital"})}},A=async e=>{try{if("add"===x){let{...s}=e;await c(s),b({success:!0,message:'Hospital "'.concat(e.name,'" added successfully')})}else await d(e.id,e),b({success:!0,message:'Hospital "'.concat(e.name,'" updated successfully')});m(!1)}catch(e){b({success:!1,message:"Failed to ".concat("add"===x?"add":"update"," hospital")})}};return v&&setTimeout(()=>{b(null)},5e3),(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column is-3",children:(0,l.jsxs)("div",{className:"box",children:[(0,l.jsx)("h3",{className:"title is-4 mb-5",children:"Hospitals"}),(0,l.jsx)("p",{className:"subtitle is-6",children:"Manage hospital facilities"}),(0,l.jsx)("div",{className:"buttons",children:(0,l.jsxs)("button",{className:"button is-primary",onClick:()=>{u(null),p("add"),m(!0)},children:[(0,l.jsx)("span",{className:"icon",children:(0,l.jsx)("i",{className:"fas fa-plus"})}),(0,l.jsx)("span",{children:"Add Hospital"})]})}),(0,l.jsx)(g,{filter:n,setFilter:t})]})}),(0,l.jsxs)("div",{className:"column is-9",children:[v&&(0,l.jsx)(N,{type:v.success?"success":"danger",message:v.message,onClose:()=>b(null)}),s?(0,l.jsx)(j,{}):a?(0,l.jsxs)("div",{className:"notification is-danger",children:[(0,l.jsx)("button",{className:"delete",onClick:()=>{}}),a]}):(0,l.jsx)("div",{className:"columns is-multiline",children:0===e.length?(0,l.jsx)("div",{className:"column is-12",children:(0,l.jsx)("div",{className:"notification is-info",children:"No hospitals found. Try adjusting your filters or add a new hospital."})}):e.map(e=>(0,l.jsx)("div",{className:"column is-4",children:(0,l.jsx)(C,{hospital:e,onEdit:()=>z(e),onDelete:()=>_(e.id,e.name)})},e.id))})]}),(0,l.jsx)(w,{isOpen:o,mode:x,hospital:h,onClose:()=>m(!1),onSave:A}),(0,l.jsx)(S,{isOpen:y.isOpen,title:"Delete Hospital",message:'Are you sure you want to delete "'.concat(y.hospitalName,'"? This action cannot be undone.'),confirmText:"Delete Hospital",cancelText:"Cancel",onConfirm:D,onCancel:()=>k({isOpen:!1,hospitalId:"",hospitalName:""}),confirmButtonClass:"is-danger"})]})}var z=a(6096);function _(e){let{filter:s,setFilter:a}=e,{departmentTypes:i}=(0,z.T)(),n=(0,f.P)().hospitals,{organizations:t}=(0,f.P)(),c=e=>{let{name:l,value:i}=e.target;a({...s,[l]:i})};return(0,l.jsxs)("aside",{className:"menu",children:[(0,l.jsx)("p",{className:"menu-label",children:"Filters"}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Organization"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-small is-fullwidth",children:(0,l.jsxs)("select",{name:"hospital",value:s.hospital,onChange:c,children:[(0,l.jsx)("option",{value:"all",children:"All Organizations"}),t.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Hospital"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-small is-fullwidth",children:(0,l.jsxs)("select",{name:"hospital",value:s.hospital,onChange:c,children:[(0,l.jsx)("option",{value:"all",children:"All Hospitals"}),n.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Department Type"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-small is-fullwidth",children:(0,l.jsxs)("select",{name:"type",value:s.type,onChange:c,children:[(0,l.jsx)("option",{value:"all",children:"All Types"}),i.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Search"}),(0,l.jsxs)("div",{className:"control has-icons-left",children:[(0,l.jsx)("input",{className:"input is-small",type:"text",placeholder:"Search departments",name:"search",value:s.search,onChange:c}),(0,l.jsx)("span",{className:"icon is-small is-left",children:(0,l.jsx)("i",{className:"fas fa-search"})})]})]})]})}var D=a(3153),A=a.n(D);function O(e){var s;let{department:a,onEdit:i,onDelete:n,onViewChildren:t}=e,c=a.color||"#3273dc",d={backgroundColor:c,color:(e=>{let s="#"===e.charAt(0)?e.substring(1):e,a=parseInt(s.substr(0,2),16),l=parseInt(s.substr(2,2),16);return(.299*a+.587*l+.114*parseInt(s.substr(4,2),16))/255>.5?"black":"white"})(c),padding:"0.75rem",borderTopLeftRadius:"0.25rem",borderTopRightRadius:"0.25rem"};return(0,l.jsxs)("div",{className:"card ".concat(A().departmentCard),children:[(0,l.jsxs)("div",{style:d,className:"is-flex is-justify-content-space-between is-align-items-center",children:[(0,l.jsxs)("div",{className:"is-flex is-align-items-center",children:[(0,l.jsx)("span",{className:"icon mr-2",children:(0,l.jsx)("i",{className:(e=>{switch(e){case"pharmacy":return"fas fa-prescription-bottle-alt";case"clinical":return"fas fa-stethoscope";case"inpatient":return"fas fa-procedures";case"outpatient":return"fas fa-user-md";case"medical":return"fas fa-heartbeat";case"porters":return"fas fa-dolly";case"catering":return"fas fa-utensils";case"admin":return"fas fa-clipboard";default:return"fas fa-building"}})(a.type)})}),(0,l.jsx)("span",{className:"has-text-weight-bold",children:a.name})]}),(0,l.jsx)("span",{className:"tag is-light",children:a.code})]}),(0,l.jsx)("div",{className:"card-content",children:(0,l.jsxs)("div",{className:"content",children:[a.description&&(0,l.jsx)("p",{className:"mb-3",children:a.description}),(0,l.jsxs)("p",{className:"is-size-7 mb-2",children:[(0,l.jsx)("strong",{children:"Hospital:"})," ",(null===(s=a.hospital)||void 0===s?void 0:s.name)||"N/A"]}),a.parent&&(0,l.jsxs)("p",{className:"is-size-7 mb-2",children:[(0,l.jsx)("strong",{children:"Parent:"})," ",a.parent.name]}),("inpatient"===a.type||"outpatient"===a.type)&&(0,l.jsxs)("div",{className:"field is-grouped is-grouped-multiline mt-3",children:[void 0!==a.pharmacistCount&&(0,l.jsx)("div",{className:"control",children:(0,l.jsxs)("div",{className:"tags has-addons",children:[(0,l.jsx)("span",{className:"tag",children:"Pharmacists"}),(0,l.jsx)("span",{className:"tag is-info",children:a.pharmacistCount})]})}),void 0!==a.technicianCount&&(0,l.jsx)("div",{className:"control",children:(0,l.jsxs)("div",{className:"tags has-addons",children:[(0,l.jsx)("span",{className:"tag",children:"Technicians"}),(0,l.jsx)("span",{className:"tag is-success",children:a.technicianCount})]})}),void 0!==a.requiresLunchCover&&(0,l.jsx)("div",{className:"control",children:(0,l.jsxs)("div",{className:"tags has-addons",children:[(0,l.jsx)("span",{className:"tag",children:"Lunch Cover"}),(0,l.jsx)("span",{className:"tag ".concat(a.requiresLunchCover?"is-warning":"is-light"),children:a.requiresLunchCover?"Required":"Not Needed"})]})})]}),(0,l.jsxs)("div",{className:"field is-grouped mt-3",children:[(0,l.jsx)("div",{className:"control",children:(0,l.jsxs)("div",{className:"tags has-addons",children:[(0,l.jsx)("span",{className:"tag",children:"Type"}),(0,l.jsx)("span",{className:"tag is-primary",children:a.type.charAt(0).toUpperCase()+a.type.slice(1)})]})}),(0,l.jsx)("div",{className:"control",children:(0,l.jsxs)("div",{className:"tags has-addons",children:[(0,l.jsx)("span",{className:"tag",children:"Status"}),(0,l.jsx)("span",{className:"tag ".concat(a.active?"is-success":"is-danger"),children:a.active?"Active":"Inactive"})]})})]})]})}),(0,l.jsxs)("footer",{className:"card-footer",children:[(0,l.jsxs)("a",{className:"card-footer-item has-text-info",onClick:i,children:[(0,l.jsx)("i",{className:"fas fa-edit mr-1"})," Edit"]}),t&&(0,l.jsxs)("a",{className:"card-footer-item has-text-primary",onClick:t,children:[(0,l.jsx)("i",{className:"fas fa-sitemap mr-1"})," Subdepartments"]}),(0,l.jsxs)("a",{className:"card-footer-item has-text-danger",onClick:n,children:[(0,l.jsx)("i",{className:"fas fa-trash mr-1"})," Delete"]})]})]})}function T(e){var s,a,n,t,c,d,r;let{isOpen:o,mode:m,department:h,onClose:u,onSave:x,parentDepartment:p=null}=e,{departmentTypes:j,departments:N}=(0,z.T)(),{organizations:v}=(0,f.P)(),g=(0,f.P)().hospitals,b={id:"",name:"",code:"",description:"",type:"",color:"#3273dc",hospital:{id:"",name:""},parent:p,requiresLunchCover:!1,pharmacistCount:0,technicianCount:0,active:!0},[y,C]=(0,i.useState)(b),[w,S]=(0,i.useState)(""),[k,_]=(0,i.useState)(!1),[D,A]=(0,i.useState)(g),[O,T]=(0,i.useState)(!1);(0,i.useEffect)(()=>{var e,s;if("edit"===m&&h){let s={...h,organization:h.hospital.organization||h.hospital&&h.hospital.organization||{id:"",name:""}};C(s),(null===(e=y.hospital.organization)||void 0===e?void 0:e.id)?A(g.filter(e=>{var a,l;return(null===(a=e.organization)||void 0===a?void 0:a.id)===(null===(l=s.organization)||void 0===l?void 0:l.id)})):A(g),T("inpatient"===h.type||"outpatient"===h.type||"pharmacy"===h.type)}else{let e={...b,parent:p};p&&p.hospital?(e.hospital=p.hospital,e.hospital.organization=p.hospital.organization||{id:"",name:""},(null===(s=p.hospital.organization)||void 0===s?void 0:s.id)&&A(g.filter(e=>{var s,a;return(null===(s=e.organization)||void 0===s?void 0:s.id)===(null===(a=p.hospital.organization)||void 0===a?void 0:a.id)}))):A(g),C(e),T(!1)}S(""),_(!1)},[m,h,g,o,p]);let E=N.filter(e=>!e.parent),M=e=>{let{name:s,value:a,type:l}=e.target;if("organizationId"===s){let e=v.find(e=>e.id===a);C({...y,hospital:{...y.hospital,organization:e?{id:e.id,name:e.name}:{id:"",name:""},id:"",name:""}}),a?A(g.filter(e=>{var s;return(null===(s=e.organization)||void 0===s?void 0:s.id)===a})):A(g)}else if("hospitalId"===s){let e=g.find(e=>e.id===a);e&&C({...y,hospital:{...y.hospital,id:e.id,name:e.name}})}else if("parentId"===s){if(""===a)C({...y,parent:null});else{let e=N.find(e=>e.id===a);if(e){let s={parent:{id:e.id,name:e.name}};e.hospital&&(s.hospital=e.hospital),e.hospital&&s.hospital&&(s.hospital.organization=e.hospital.organization,A(g.filter(s=>{var a,l;return(null===(a=s.organization)||void 0===a?void 0:a.id)===(null===(l=e.hospital.organization)||void 0===l?void 0:l.id)}))),C({...y,...s})}}}else"type"===s?(T("inpatient"===a||"outpatient"===a||"pharmacy"===a),C({...y,[s]:a})):C({...y,[s]:"checkbox"===l?e.target.checked:"number"===l?parseInt(a):a})},I=()=>{var e,s;if(!y.name.trim())return S("Department name is required"),!1;if(!y.code.trim())return S("Department code is required"),!1;if(!y.type)return S("Department type is required"),!1;if(!(null===(e=y.hospital.organization)||void 0===e?void 0:e.id))return S("Organization is required"),!1;if(!(null===(s=y.hospital)||void 0===s?void 0:s.id))return S("Hospital is required"),!1;if("inpatient"===y.type||"outpatient"===y.type){if(void 0===y.pharmacistCount||y.pharmacistCount<0)return S("Pharmacist count must be 0 or higher"),!1;if(void 0===y.technicianCount||y.technicianCount<0)return S("Technician count must be 0 or higher"),!1}return!0};return o?(0,l.jsxs)("div",{className:"modal ".concat(o?"is-active":""),children:[(0,l.jsx)("div",{className:"modal-background",onClick:u}),(0,l.jsxs)("div",{className:"modal-card",children:[(0,l.jsxs)("header",{className:"modal-card-head",children:[(0,l.jsx)("p",{className:"modal-card-title",children:"add"===m?"Add New Department":"Edit Department"}),(0,l.jsx)("button",{className:"delete","aria-label":"close",onClick:u,disabled:k})]}),(0,l.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),I()){_(!0);try{x(y)}catch(e){console.error("Error saving department:",e),S("An error occurred while saving. Please try again."),_(!1)}}},children:[(0,l.jsxs)("section",{className:"modal-card-body",children:[w&&(0,l.jsxs)("div",{className:"notification is-danger",children:[(0,l.jsx)("button",{type:"button",className:"delete",onClick:()=>S("")}),w]}),(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column is-8",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Department Name"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"text",name:"name",value:y.name,onChange:M,placeholder:"Enter department name",required:!0})})]})}),(0,l.jsx)("div",{className:"column is-4",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Code"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"text",name:"code",value:y.code,onChange:M,placeholder:"Department code",required:!0})})]})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Description"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("textarea",{className:"textarea",name:"description",value:y.description||"",onChange:M,placeholder:"Department description",rows:2})})]}),(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Organization"}),(0,l.jsxs)("div",{className:"control",children:[(0,l.jsx)("div",{className:"select is-fullwidth",children:(0,l.jsxs)("select",{name:"organizationId",value:(null===(s=y.hospital.organization)||void 0===s?void 0:s.id)||(null===(n=y.hospital)||void 0===n?void 0:null===(a=n.organization)||void 0===a?void 0:a.id)||"",onChange:M,required:!0,disabled:!!y.parent,children:[(0,l.jsx)("option",{value:"",children:"Select organization"}),v.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})}),y.parent&&(0,l.jsx)("p",{className:"help",children:"Organization is determined by parent department"})]})]})}),(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Hospital"}),(0,l.jsxs)("div",{className:"control",children:[(0,l.jsx)("div",{className:"select is-fullwidth",children:(0,l.jsxs)("select",{name:"hospitalId",value:(null===(t=y.hospital)||void 0===t?void 0:t.id)||"",onChange:M,required:!0,disabled:!!y.parent||!(null===(c=y.hospital.organization)||void 0===c?void 0:c.id),children:[(0,l.jsx)("option",{value:"",children:"Select hospital"}),D.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})}),y.parent?(0,l.jsx)("p",{className:"help",children:"Hospital is determined by parent department"}):!(null===(d=y.hospital.organization)||void 0===d?void 0:d.id)&&(0,l.jsx)("p",{className:"help",children:"Please select an organization first"})]})]})})]}),(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Department Type"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-fullwidth",children:(0,l.jsxs)("select",{name:"type",value:y.type,onChange:M,required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select type"}),j.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]})}),(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Parent Department"}),(0,l.jsxs)("div",{className:"control",children:[(0,l.jsx)("div",{className:"select is-fullwidth",children:(0,l.jsxs)("select",{name:"parentId",value:(null===(r=y.parent)||void 0===r?void 0:r.id)||"",onChange:M,disabled:"edit"===m&&(null==h?void 0:h.children)&&h.children.length>0,children:[(0,l.jsx)("option",{value:"",children:"No Parent (Top-Level)"}),E.filter(e=>e.id!==y.id).map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})}),"edit"===m&&(null==h?void 0:h.children)&&h.children.length>0&&(0,l.jsx)("p",{className:"help",children:"Cannot change parent when department has subdepartments"})]})]})})]}),(0,l.jsxs)("div",{className:"field mt-3",children:[(0,l.jsx)("label",{className:"label",children:"Color"}),(0,l.jsxs)("div",{className:"control has-icons-left",children:[(0,l.jsx)("input",{className:"input",type:"color",name:"color",value:y.color||"#3273dc",onChange:M}),(0,l.jsx)("span",{className:"icon is-small is-left",children:(0,l.jsx)("i",{className:"fas fa-palette"})})]})]}),O&&(0,l.jsxs)("div",{className:"box mt-4",children:[(0,l.jsx)("h4",{className:"title is-5 mb-3",children:"Special Settings"}),(0,l.jsx)("div",{className:"field",children:(0,l.jsx)("div",{className:"control",children:(0,l.jsxs)("label",{className:"checkbox",children:[(0,l.jsx)("input",{type:"checkbox",name:"requiresLunchCover",checked:y.requiresLunchCover||!1,onChange:M}),"\xa0Requires Lunch Cover"]})})}),(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Pharmacist Count"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"number",name:"pharmacistCount",value:y.pharmacistCount||0,onChange:M,min:"0"})})]})}),(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Technician Count"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"number",name:"technicianCount",value:y.technicianCount||0,onChange:M,min:"0"})})]})})]})]}),(0,l.jsx)("div",{className:"field mt-4",children:(0,l.jsx)("div",{className:"control",children:(0,l.jsxs)("label",{className:"checkbox",children:[(0,l.jsx)("input",{type:"checkbox",name:"active",checked:y.active,onChange:M}),"\xa0Active"]})})})]}),(0,l.jsxs)("footer",{className:"modal-card-foot",children:[(0,l.jsx)("button",{type:"submit",className:"button is-primary ".concat(k?"is-loading":""),disabled:k,children:"add"===m?"Add Department":"Save Changes"}),(0,l.jsx)("button",{type:"button",className:"button",onClick:u,disabled:k,children:"Cancel"})]})]})]})]}):null}function E(){let{departments:e,loading:s,error:a,filter:n,setFilter:t,addNewDepartment:c,updateExistingDepartment:d,removeDepartment:r,getDepartmentChildren:o}=(0,z.T)(),[m,h]=(0,i.useState)(!1),[u,x]=(0,i.useState)(null),[p,v]=(0,i.useState)("add"),[f,g]=(0,i.useState)(null),[b,y]=(0,i.useState)(null),[C,w]=(0,i.useState)({isOpen:!1,departmentId:"",departmentName:""}),[k,D]=(0,i.useState)(null),[A,E]=(0,i.useState)([]),[M,I]=(0,i.useState)(!1),H=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;x(null),g(e),v("add"),h(!0)},W=e=>{x(e),g(null),v("edit"),h(!0)},P=(e,s)=>{w({isOpen:!0,departmentId:e,departmentName:s})},R=async()=>{try{await r(C.departmentId),y({success:!0,message:'Department "'.concat(C.departmentName,'" deleted successfully')}),k&&k.id===C.departmentId&&(D(null),E([])),w({isOpen:!1,departmentId:"",departmentName:""})}catch(e){y({success:!1,message:e.message||"Failed to delete department"}),w({isOpen:!1,departmentId:"",departmentName:""})}},q=async e=>{try{if("add"===p){var s;let{id:a,children:l,createdAt:i,updatedAt:n,...t}=e;console.log("Adding department:",t),await c(t),y({success:!0,message:'Department "'.concat(e.name,'" added successfully')}),k&&(null===(s=e.parent)||void 0===s?void 0:s.id)===k.id&&await F(k)}else{let{children:s,...a}=e;await d(e.id,a),y({success:!0,message:'Department "'.concat(e.name,'" updated successfully')}),k&&(e.id===k.id||A.some(s=>s.id===e.id))&&await F(k)}h(!1)}catch(e){y({success:!1,message:"Failed to ".concat("add"===p?"add":"update"," department")||0})}},F=async e=>{D(e),I(!0);try{let s=await o(e.id);E(s)}catch(e){console.error("Error fetching subdepartments:",e),y({success:!1,message:"Failed to load subdepartments"})}finally{I(!1)}};b&&setTimeout(()=>{y(null)},5e3);let B=e.filter(e=>!e.parent),L=k?A:B;return(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column is-3",children:(0,l.jsxs)("div",{className:"box",children:[(0,l.jsx)("h3",{className:"title is-4 mb-4",children:"Departments"}),(0,l.jsx)("p",{className:"subtitle is-6 mb-5",children:"Manage hospital departments"}),k?(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"notification is-primary is-light mb-4",children:[(0,l.jsx)("p",{className:"is-size-6 mb-2",children:(0,l.jsx)("strong",{children:"Selected Department:"})}),(0,l.jsx)("p",{className:"is-size-5 has-text-weight-bold",children:k.name}),(0,l.jsx)("p",{className:"is-size-7 mt-2",children:k.description})]}),(0,l.jsxs)("div",{className:"buttons",children:[(0,l.jsxs)("button",{className:"button is-info is-outlined mb-4",onClick:()=>{D(null),E([])},children:[(0,l.jsx)("span",{className:"icon",children:(0,l.jsx)("i",{className:"fas fa-arrow-left"})}),(0,l.jsx)("span",{children:"Back to All Departments"})]}),(0,l.jsxs)("button",{className:"button is-primary",onClick:()=>H(k),children:[(0,l.jsx)("span",{className:"icon",children:(0,l.jsx)("i",{className:"fas fa-plus"})}),(0,l.jsx)("span",{children:"Add Subdepartment"})]})]})]}):(0,l.jsx)("div",{className:"buttons mb-4",children:(0,l.jsxs)("button",{className:"button is-primary",onClick:()=>H(),children:[(0,l.jsx)("span",{className:"icon",children:(0,l.jsx)("i",{className:"fas fa-plus"})}),(0,l.jsx)("span",{children:"Add Department"})]})}),!k&&(0,l.jsx)(_,{filter:n,setFilter:t})]})}),(0,l.jsxs)("div",{className:"column is-9",children:[b&&(0,l.jsx)(N,{type:b.success?"success":"danger",message:b.message,onClose:()=>y(null)}),s||M?(0,l.jsx)(j,{}):a?(0,l.jsxs)("div",{className:"notification is-danger",children:[(0,l.jsx)("button",{className:"delete",onClick:()=>{}}),a]}):(0,l.jsxs)(l.Fragment,{children:[k&&(0,l.jsxs)("div",{className:"is-flex is-justify-content-space-between is-align-items-center mb-4",children:[(0,l.jsxs)("h3",{className:"title is-4",children:["Subdepartments of ",k.name]}),(0,l.jsxs)("span",{className:"tag is-info is-medium",children:[A.length," subdepartments"]})]}),(0,l.jsx)("div",{className:"columns is-multiline",children:0===L.length?(0,l.jsx)("div",{className:"column is-12",children:(0,l.jsx)("div",{className:"notification is-info",children:k?"No subdepartments found. Add a subdepartment to get started.":"No departments found. Try adjusting your filters or add a new department."})}):L.map(e=>(0,l.jsx)("div",{className:"column is-4",children:(0,l.jsx)(O,{department:e,onEdit:()=>W(e),onDelete:()=>P(e.id,e.name),onViewChildren:k?void 0:()=>F(e)})},e.id))})]})]}),(0,l.jsx)(T,{isOpen:m,mode:p,department:u,onClose:()=>h(!1),onSave:q,parentDepartment:f}),(0,l.jsx)(S,{isOpen:C.isOpen,title:"Delete Department",message:'Are you sure you want to delete "'.concat(C.departmentName,'"? This action cannot be undone.'),confirmText:"Delete Department",cancelText:"Cancel",onConfirm:R,onCancel:()=>w({isOpen:!1,departmentId:"",departmentName:""}),confirmButtonClass:"is-danger"})]})}var M=a(1356);function I(e){let{filter:s,setFilter:a}=e,{departments:i,hospitals:n}=(0,M.T)(),t=e=>{let{name:l,value:n}=e.target;if("department"===l&&"all"!==n){let e=i.find(e=>e.id===n);if(e&&e.hospital){a({...s,[l]:n,hospital:e.hospital.id});return}}a({...s,[l]:n})};return(0,l.jsxs)("aside",{className:"menu",children:[(0,l.jsx)("p",{className:"menu-label",children:"Filters"}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Department"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-small is-fullwidth",children:(0,l.jsxs)("select",{name:"department",value:s.department,onChange:t,children:[(0,l.jsx)("option",{value:"all",children:"All Departments"}),i.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Hospital"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-small is-fullwidth",children:(0,l.jsxs)("select",{name:"hospital",value:s.hospital,onChange:t,children:[(0,l.jsx)("option",{value:"all",children:"All Hospitals"}),n.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Search"}),(0,l.jsxs)("div",{className:"control has-icons-left",children:[(0,l.jsx)("input",{className:"input is-small",type:"text",placeholder:"Search wards",name:"search",value:s.search,onChange:t}),(0,l.jsx)("span",{className:"icon is-small is-left",children:(0,l.jsx)("i",{className:"fas fa-search"})})]})]})]})}var H=a(3741),W=a.n(H);function P(e){var s,a,i;let{ward:n,onEdit:t,onDelete:c,onManageDepartments:d}=e,r=(null===(s=n.department)||void 0===s?void 0:s.color)||"#3273dc",o=e=>{let s="#"===e.charAt(0)?e.substring(1):e,a=parseInt(s.substr(0,2),16),l=parseInt(s.substr(2,2),16);return(.299*a+.587*l+.114*parseInt(s.substr(4,2),16))/255>.5?"black":"white"},m={backgroundColor:r,color:o(r),padding:"0.75rem",borderTopLeftRadius:"0.25rem",borderTopRightRadius:"0.25rem"};return(0,l.jsxs)("div",{className:"card ".concat(W().wardCard),children:[(0,l.jsxs)("div",{style:m,className:"is-flex is-justify-content-space-between is-align-items-center",children:[(0,l.jsxs)("div",{className:"is-flex is-align-items-center",children:[(0,l.jsx)("span",{className:"icon mr-2",children:(0,l.jsx)("i",{className:"fas fa-bed"})}),(0,l.jsx)("span",{className:"has-text-weight-bold",children:n.name})]}),(0,l.jsx)("span",{className:"tag is-light",children:n.code})]}),(0,l.jsx)("div",{className:"card-content",children:(0,l.jsxs)("div",{className:"content",children:[(0,l.jsxs)("p",{className:"is-size-7 mb-2",children:[(0,l.jsx)("strong",{children:"Primary Department:"})," ",(null===(a=n.department)||void 0===a?void 0:a.name)||"None"]}),(0,l.jsxs)("p",{className:"is-size-7 mb-2",children:[(0,l.jsx)("strong",{children:"Hospital:"})," ",(null===(i=n.hospital)||void 0===i?void 0:i.name)||"N/A"]}),n.departments&&n.departments.length>0&&(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsx)("p",{className:"is-size-7 mb-1",children:(0,l.jsx)("strong",{children:"All Departments:"})}),(0,l.jsx)("div",{className:"tags are-small",children:n.departments.map((e,s)=>(0,l.jsxs)("span",{className:"tag",style:{backgroundColor:e.department.color||"#3273dc",color:o(e.department.color||"#3273dc")},children:[e.department.name,e.isPrimary&&(0,l.jsx)("span",{className:"ml-1",children:(0,l.jsx)("i",{className:"fas fa-star",style:{fontSize:"0.7em"}})})]},s))})]}),(0,l.jsxs)("div",{className:"field is-grouped mt-3",children:[(0,l.jsx)("div",{className:"control",children:(0,l.jsxs)("div",{className:"tags has-addons",children:[(0,l.jsx)("span",{className:"tag",children:"Beds"}),(0,l.jsx)("span",{className:"tag is-info",children:n.bedCount})]})}),(0,l.jsx)("div",{className:"control",children:(0,l.jsxs)("div",{className:"tags has-addons",children:[(0,l.jsx)("span",{className:"tag",children:"Status"}),(0,l.jsx)("span",{className:"tag ".concat(n.active?"is-success":"is-danger"),children:n.active?"Active":"Inactive"})]})})]})]})}),(0,l.jsxs)("footer",{className:"card-footer",children:[(0,l.jsxs)("a",{className:"card-footer-item has-text-info",onClick:t,children:[(0,l.jsx)("i",{className:"fas fa-edit mr-1"})," Edit"]}),(0,l.jsxs)("a",{className:"card-footer-item has-text-primary",onClick:d,children:[(0,l.jsx)("i",{className:"fas fa-sitemap mr-1"})," Departments"]}),(0,l.jsxs)("a",{className:"card-footer-item has-text-danger",onClick:c,children:[(0,l.jsx)("i",{className:"fas fa-trash mr-1"})," Delete"]})]})]})}function R(e){var s,a,n,t,c,d;let{isOpen:r,mode:o,ward:m,onClose:h,onSave:u,departmentId:x}=e,{departments:j,hospitals:N,assignWardToDepartment:v}=(0,M.T)(),{organizations:f}=(0,p.G)(),g={id:"",name:"",code:"",department:{id:"",name:""},hospital:{id:"",name:""},bedCount:0,active:!0},[b,y]=(0,i.useState)(g),[C,w]=(0,i.useState)(""),[S,k]=(0,i.useState)(!1),[z,_]=(0,i.useState)(""),[D,A]=(0,i.useState)(""),[O,T]=(0,i.useState)(""),[E,I]=(0,i.useState)(!0),[H,W]=(0,i.useState)(""),[P,R]=(0,i.useState)([]),[q,F]=(0,i.useState)({}),[B,L]=(0,i.useState)({});(0,i.useEffect)(()=>{let e={};N.forEach(s=>{if(!s.organization)return;let a=s.organization.id,l=s.organization.name;e[a]||(e[a]={organization:{id:a,name:l},hospitals:[]}),e[a].hospitals.push(s)}),L(e)},[N]),(0,i.useEffect)(()=>{let e=j.map(e=>({...e,hospital:e.hospital||{id:"unknown",name:"Unknown Hospital"}}));R(e);let s={};if(e.forEach(e=>{var a,l;if(!e.hospital)return;let i=e.hospital.id,n=(null===(a=e.hospital.organization)||void 0===a?void 0:a.id)||"unknown",t=(null===(l=e.hospital.organization)||void 0===l?void 0:l.name)||"Unknown Organization";s[n]||(s[n]={organization:{id:n,name:t},hospitals:{}}),s[n].hospitals[i]||(s[n].hospitals[i]={hospital:e.hospital,departments:[]}),s[n].hospitals[i].departments.push(e)}),F(s),x){let e=j.find(e=>e.id===x);if(e&&e.hospital){var a;let s=e.hospital.id,l=null===(a=e.hospital.organization)||void 0===a?void 0:a.id;l&&_(l),s&&A(s),T(x)}}},[j,x]),(0,i.useEffect)(()=>{if("edit"===o&&m)y({...m}),m.hospital&&m.hospital.organization&&(_(m.hospital.organization.id),A(m.hospital.id));else{let e={...g};if(x){let s=j.find(e=>e.id===x);s&&(e.department={id:s.id,name:s.name,color:s.color},s.hospital&&(e.hospital=s.hospital))}y(e)}w(""),k(!1)},[o,m,j,N,r,x]);let U=e=>{let{name:s,value:a,type:l}=e.target;"makeInitialDepartmentPrimary"===s?I(e.target.checked):"departmentSearchQuery"===s?W(a):y({...b,[s]:"checkbox"===l?e.target.checked:"number"===l?parseInt(a):a})},G=()=>{var e;return b.name.trim()?b.code.trim()?(null===(e=b.hospital)||void 0===e?void 0:e.id)?"add"!==o||O?!(b.bedCount<0)||(w("Bed count must be 0 or higher"),!1):(w("Please select a department"),!1):(w("Hospital is required"),!1):(w("Ward code is required"),!1):(w("Ward name is required"),!1)},J=async e=>{if(e.preventDefault(),G()){k(!0);try{"add"===o?await u(b):u(b)}catch(e){console.error("Error saving ward:",e),w("An error occurred while saving. Please try again."),k(!1)}}};return r?(0,l.jsxs)("div",{className:"modal ".concat(r?"is-active":""),children:[(0,l.jsx)("div",{className:"modal-background",onClick:h}),(0,l.jsxs)("div",{className:"modal-card",style:{width:"700px",maxWidth:"90vw"},children:[(0,l.jsxs)("header",{className:"modal-card-head",children:[(0,l.jsx)("p",{className:"modal-card-title",children:"add"===o?"Add New Ward":"Edit Ward"}),(0,l.jsx)("button",{className:"delete","aria-label":"close",onClick:h,disabled:S})]}),(0,l.jsxs)("form",{onSubmit:J,children:[(0,l.jsxs)("section",{className:"modal-card-body",children:[C&&(0,l.jsxs)("div",{className:"notification is-danger",children:[(0,l.jsx)("button",{type:"button",className:"delete",onClick:()=>w("")}),C]}),(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column is-8",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Ward Name"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"text",name:"name",value:b.name,onChange:U,placeholder:"Enter ward name",required:!0})})]})}),(0,l.jsx)("div",{className:"column is-4",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Code"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"text",name:"code",value:b.code,onChange:U,placeholder:"Ward code",required:!0})})]})})]}),(0,l.jsxs)("div",{className:"box",children:[(0,l.jsx)("h5",{className:"title is-6 mb-3",children:"Location & Department"}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Organization"}),(0,l.jsxs)("div",{className:"control",children:[(0,l.jsx)("div",{className:"select is-fullwidth",children:(0,l.jsxs)("select",{value:z,onChange:e=>{_(e.target.value),A(""),T(""),y(e=>({...e,hospital:{id:"",name:""},department:{id:"",name:""}}))},disabled:"edit"===o,children:[(0,l.jsx)("option",{value:"",children:"Select organization"}),Object.values(B).map(e=>(0,l.jsx)("option",{value:e.organization.id,children:e.organization.name},e.organization.id))]})}),"edit"===o&&(0,l.jsx)("p",{className:"help mt-1",children:"Organization cannot be changed after ward creation"})]})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Hospital"}),(0,l.jsxs)("div",{className:"control",children:[(0,l.jsx)("div",{className:"select is-fullwidth",children:(0,l.jsxs)("select",{value:D,onChange:e=>{let s=e.target.value;A(s),T("");let a=N.find(e=>e.id===s);a&&y(e=>({...e,hospital:{id:a.id,name:a.name,organization:a.organization},department:{id:"",name:""}}))},disabled:!z||"edit"===o,children:[(0,l.jsx)("option",{value:"",children:z?"Select hospital":"Select organization first"}),z&&(null===(s=B[z])||void 0===s?void 0:s.hospitals.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id)))]})}),"edit"===o&&(0,l.jsx)("p",{className:"help mt-1",children:"Hospital cannot be changed after ward creation"})]})]}),"add"===o&&(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Department"}),(0,l.jsx)("div",{className:"is-flex mb-2",children:(0,l.jsx)("div",{className:"control is-expanded mr-2",children:(0,l.jsx)("input",{className:"input is-small",type:"text",name:"departmentSearchQuery",value:H,onChange:U,placeholder:"Search departments...",disabled:!D})})}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-fullwidth",children:(0,l.jsxs)("select",{value:O,onChange:e=>{let s=e.target.value;if(T(s),s){let e=j.find(e=>e.id===s);e&&y(s=>({...s,department:{id:e.id,name:e.name,color:e.color}}))}else y(e=>({...e,department:{id:"",name:""}}))},disabled:!D,required:"add"===o,children:[(0,l.jsx)("option",{value:"",children:D?"Select department":"Select hospital first"}),(()=>{if(!D)return[];let e=P.filter(e=>{var s;return(null===(s=e.hospital)||void 0===s?void 0:s.id)===D});if(H){let s=H.toLowerCase();e=e.filter(e=>{var a;return e.name.toLowerCase().includes(s)||((null===(a=e.code)||void 0===a?void 0:a.toLowerCase())||"").includes(s)})}return e})().map(e=>(0,l.jsxs)("option",{value:e.id,children:[e.name," ",e.code?"(".concat(e.code,")"):""]},e.id))]})})}),"add"===o&&D&&(0,l.jsx)("div",{className:"control mt-2",children:(0,l.jsxs)("label",{className:"checkbox",children:[(0,l.jsx)("input",{type:"checkbox",name:"makeInitialDepartmentPrimary",checked:E,onChange:U}),"\xa0Set as primary department"]})})]}),"edit"===o&&(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Primary Department"}),(0,l.jsxs)("div",{className:"control",children:[(0,l.jsxs)("div",{className:"is-flex is-align-items-center p-2 has-background-light",children:[(0,l.jsx)("span",{className:"mr-2",style:{width:"16px",height:"16px",backgroundColor:(null===(a=b.department)||void 0===a?void 0:a.color)||"#3273dc",borderRadius:"50%",display:"inline-block"}}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"has-text-weight-medium",children:(null===(n=b.department)||void 0===n?void 0:n.name)||"No primary department"}),(0,l.jsxs)("p",{className:"is-size-7 has-text-grey",children:[(null===(t=b.hospital)||void 0===t?void 0:t.name)||"",(null===(d=b.hospital)||void 0===d?void 0:null===(c=d.organization)||void 0===c?void 0:c.name)&&" (".concat(b.hospital.organization.name,")")]})]})]}),(0,l.jsx)("p",{className:"help mt-2",children:'Use the "Manage Departments" option from the ward card to change department assignments.'})]})]})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Bed Count"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"number",name:"bedCount",value:b.bedCount,onChange:U,min:"0"})})]}),(0,l.jsx)("div",{className:"field mt-4",children:(0,l.jsx)("div",{className:"control",children:(0,l.jsxs)("label",{className:"checkbox",children:[(0,l.jsx)("input",{type:"checkbox",name:"active",checked:b.active,onChange:U}),"\xa0Active"]})})})]}),(0,l.jsxs)("footer",{className:"modal-card-foot",children:[(0,l.jsx)("button",{type:"submit",className:"button is-primary ".concat(S?"is-loading":""),disabled:S,children:"add"===o?"Add Ward":"Save Changes"}),(0,l.jsx)("button",{type:"button",className:"button",onClick:h,disabled:S,children:"Cancel"})]})]})]})]}):null}function q(e){var s;let{isOpen:a,ward:n,onClose:t}=e,{departments:c,hospitals:d,currentWardDepartments:r,getWardDepartments:o,assignWardToDepartment:m,setPrimaryDepartment:h,removeWardDepartmentAssignment:u}=(0,M.T)(),[x,p]=(0,i.useState)(""),[N,v]=(0,i.useState)(!1),[f,g]=(0,i.useState)(!1),[b,y]=(0,i.useState)(null),[C,w]=(0,i.useState)(null),[S,k]=(0,i.useState)(""),[z,_]=(0,i.useState)(""),[D,A]=(0,i.useState)(""),[O,T]=(0,i.useState)([]),[E,I]=(0,i.useState)({}),[H,W]=(0,i.useState)({});(0,i.useEffect)(()=>{a&&n?(q().then(),R(),P()):(p(""),v(!1),y(null),w(null),k(""),_(""),A(""))},[a,n,c,d]);let P=()=>{let e={};d.forEach(s=>{if(!s.organization)return;let a=s.organization.id,l=s.organization.name;e[a]||(e[a]={organization:{id:a,name:l},hospitals:[]}),e[a].hospitals.push(s)}),W(e)},R=()=>{let e=c.map(e=>({...e,hospital:e.hospital||{id:"unknown",name:"Unknown Hospital"}}));T(e);let s={};e.forEach(e=>{var a;let l=(null===(a=e.hospital)||void 0===a?void 0:a.id)||"unknown";s[l]||(s[l]=[]),s[l].push(e)}),I(s)},q=async()=>{if(n){g(!0);try{await o(n.id)}catch(e){y("Failed to load department assignments for this ward.")}finally{g(!1)}}},F=async()=>{if(!n||!x){y("Please select a department");return}g(!0),y(null);try{await m(n.id,x,N),p(""),v(!1),w("Department assigned successfully"),setTimeout(()=>w(null),3e3)}catch(e){y("Failed to assign department to ward")}finally{g(!1)}},B=async e=>{if(n){g(!0),y(null);try{await h(e,n.id),w("Primary department updated successfully"),setTimeout(()=>w(null),3e3)}catch(e){y("Failed to set primary department")}finally{g(!1)}}},L=async e=>{if(n&&confirm("Are you sure you want to remove this department assignment?")){g(!0),y(null);try{await u(e),w("Department assignment removed successfully"),setTimeout(()=>w(null),3e3)}catch(e){y("Failed to remove department assignment")}finally{g(!1)}}},U=(()=>{let e=[...O];if(S&&(e=e.filter(e=>{var s,a;return(null===(a=e.hospital)||void 0===a?void 0:null===(s=a.organization)||void 0===s?void 0:s.id)===S})),z&&(e=e.filter(e=>{var s;return(null===(s=e.hospital)||void 0===s?void 0:s.id)===z})),D){let s=D.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(s)||e.code.toLowerCase().includes(s))}return e.filter(e=>!r.some(s=>s.department.id===e.id))})();return a?(0,l.jsxs)("div",{className:"modal ".concat(a?"is-active":""),children:[(0,l.jsx)("div",{className:"modal-background",onClick:t}),(0,l.jsxs)("div",{className:"modal-card",style:{maxWidth:"700px",width:"100%"},children:[(0,l.jsxs)("header",{className:"modal-card-head",children:[(0,l.jsx)("p",{className:"modal-card-title",children:"Manage Ward Departments"}),(0,l.jsx)("button",{className:"delete","aria-label":"close",onClick:t,disabled:f})]}),(0,l.jsxs)("section",{className:"modal-card-body",children:[b&&(0,l.jsxs)("div",{className:"notification is-danger",children:[(0,l.jsx)("button",{className:"delete",onClick:()=>y(null)}),b]}),C&&(0,l.jsxs)("div",{className:"notification is-success",children:[(0,l.jsx)("button",{className:"delete",onClick:()=>w(null)}),C]}),(0,l.jsxs)("h4",{className:"title is-5",children:["Ward: ",(0,l.jsx)("strong",{children:null==n?void 0:n.name})]}),(0,l.jsxs)("div",{className:"box",children:[(0,l.jsx)("h5",{className:"title is-6",children:"Assign to Department"}),(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Organization"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-fullwidth",children:(0,l.jsxs)("select",{value:S,onChange:e=>{k(e.target.value),_(""),p("")},disabled:f,children:[(0,l.jsx)("option",{value:"",children:"All Organizations"}),Object.values(H).map(e=>(0,l.jsx)("option",{value:e.organization.id,children:e.organization.name},e.organization.id))]})})})]})}),(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Hospital"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-fullwidth",children:(0,l.jsxs)("select",{value:z,onChange:e=>{_(e.target.value),p("")},disabled:f||!S,children:[(0,l.jsx)("option",{value:"",children:S?"All Hospitals":"Select organization first"}),S&&(null===(s=H[S])||void 0===s?void 0:s.hospitals.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id)))]})})})]})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Search Departments"}),(0,l.jsxs)("div",{className:"control has-icons-left",children:[(0,l.jsx)("input",{className:"input",type:"text",placeholder:"Search by name or code",value:D,onChange:e=>{A(e.target.value)},disabled:f}),(0,l.jsx)("span",{className:"icon is-small is-left",children:(0,l.jsx)("i",{className:"fas fa-search"})})]})]}),(0,l.jsxs)("div",{className:"field mt-3",children:[(0,l.jsx)("label",{className:"label",children:"Department"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-fullwidth",children:(0,l.jsxs)("select",{value:x,onChange:e=>{p(e.target.value)},disabled:f||0===U.length,children:[(0,l.jsx)("option",{value:"",children:U.length>0?"Select a department":"No available departments match filter criteria"}),U.map(e=>(0,l.jsxs)("option",{value:e.id,children:[e.name," (",e.code,") -"," ",e.hospital.name]},e.id))]})})}),U.length>0&&(0,l.jsxs)("p",{className:"help has-text-info",children:[U.length," departments available"]})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("div",{className:"control",children:(0,l.jsxs)("label",{className:"checkbox",children:[(0,l.jsx)("input",{type:"checkbox",checked:N,onChange:e=>v(e.target.checked),disabled:f}),"\xa0Set as primary department"]})}),(0,l.jsx)("p",{className:"help",children:"A ward must have one primary department. This is used for default views and assignments."})]}),(0,l.jsx)("div",{className:"field",children:(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("button",{className:"button is-primary ".concat(f?"is-loading":""),onClick:F,disabled:f||!x,children:"Assign Department"})})}),0===U.length&&O.every(e=>r.some(s=>s.department.id===e.id))&&(0,l.jsx)("p",{className:"help has-text-info",children:"All departments have been assigned to this ward."})]}),(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("h5",{className:"title is-6",children:"Current Department Assignments"}),f?(0,l.jsx)(j,{}):0===r.length?(0,l.jsx)("div",{className:"notification is-warning is-light",children:(0,l.jsx)("p",{children:"This ward is not assigned to any departments."})}):(0,l.jsxs)("table",{className:"table is-fullwidth is-striped",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Department"}),(0,l.jsx)("th",{children:"Hospital"}),(0,l.jsx)("th",{children:"Primary"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:r.map(e=>{var s,a,i;let n=O.find(s=>s.id===e.department.id);return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"is-flex is-align-items-center",children:[(0,l.jsx)("span",{className:"mr-2",style:{width:"12px",height:"12px",backgroundColor:e.department.color,borderRadius:"50%",display:"inline-block"}}),(0,l.jsxs)("span",{children:[e.department.name,(0,l.jsxs)("span",{className:"has-text-grey ml-1",children:["(",e.department.code,")"]})]})]})}),(0,l.jsxs)("td",{children:[(null==n?void 0:null===(s=n.hospital)||void 0===s?void 0:s.name)||"Unknown Hospital",(null==n?void 0:null===(i=n.hospital)||void 0===i?void 0:null===(a=i.organization)||void 0===a?void 0:a.name)&&(0,l.jsxs)("span",{className:"has-text-grey is-size-7 ml-1",children:["(",n.hospital.organization.name,")"]})]}),(0,l.jsx)("td",{children:e.isPrimary?(0,l.jsx)("span",{className:"tag is-primary",children:"Primary"}):(0,l.jsx)("button",{className:"button is-small",onClick:()=>B(e.id),disabled:f,children:"Set as Primary"})}),(0,l.jsx)("td",{children:(0,l.jsxs)("button",{className:"button is-small is-danger",onClick:()=>L(e.id),disabled:f,children:[(0,l.jsx)("span",{className:"icon is-small",children:(0,l.jsx)("i",{className:"fas fa-trash"})}),(0,l.jsx)("span",{children:"Remove"})]})})]},e.id)})})]})]})]}),(0,l.jsx)("footer",{className:"modal-card-foot",children:(0,l.jsx)("button",{className:"button",onClick:t,disabled:f,children:"Close"})})]})]}):null}function F(){let{wards:e,loading:s,error:a,filter:n,setFilter:t,departments:c,hospitals:d,addNewWard:r,updateExistingWard:o,removeWard:m,getWardDepartments:h}=(0,M.T)(),{organizations:u}=(0,p.G)(),[x,v]=(0,i.useState)(!1),[f,g]=(0,i.useState)(null),[b,y]=(0,i.useState)("add"),[C,w]=(0,i.useState)(void 0),[k,z]=(0,i.useState)(!1),[_,D]=(0,i.useState)(null),[A,O]=(0,i.useState)(null),[T,E]=(0,i.useState)({isOpen:!1,wardId:"",wardName:""}),[H,W]=(0,i.useState)(!1),[F,B]=(0,i.useState)("all"),[L,U]=(0,i.useState)("all"),[G,J]=(0,i.useState)(""),[V,Y]=(0,i.useState)({}),[X,Z]=(0,i.useState)({});(0,i.useEffect)(()=>{let e={};if(d.forEach(s=>{s.organization&&(e[s.id]={id:s.organization.id,name:s.organization.name})}),0===Object.keys(e).length&&u.length>0){let s={};u.forEach(e=>{s[e.id]=e.name}),d.forEach(a=>{let l=a.organization.id;l&&s[l]&&(e[a.id]={id:l,name:s[l]})})}Y(e)},[d,u]),(0,i.useEffect)(()=>{let e={};c.forEach(s=>{if(!s.hospital)return;let a=s.hospital.id,l=V[a]||{id:"unknown",name:"Unknown Organization"},i=l.id,n=l.name;e[i]||(e[i]={organization:{id:i,name:n},hospitals:{}}),e[i].hospitals[a]||(e[i].hospitals[a]={hospital:{...s.hospital,organization:l},departments:[]}),e[i].hospitals[a].departments.push({...s,hospital:{...s.hospital,organization:l}})}),Z(e)},[c,V]);let $=e=>{g(null),w(e),y("add"),v(!0),W(!1)},Q=e=>{g(e),w(void 0),y("edit"),v(!0)},K=async e=>{try{await h(e.id),D(e),z(!0)}catch(e){O({success:!1,message:"Failed to load department"})}},ee=(e,s)=>{E({isOpen:!0,wardId:e,wardName:s})},es=async()=>{try{await m(T.wardId),O({success:!0,message:'Ward "'.concat(T.wardName,'" deleted successfully')}),E({isOpen:!1,wardId:"",wardName:""})}catch(e){O({success:!1,message:"Failed to delete ward"}),E({isOpen:!1,wardId:"",wardName:""})}},ea=async e=>{try{if("add"===b){let{id:s,createdAt:a,updatedAt:l,...i}=e;await r(i),O({success:!0,message:'Ward "'.concat(e.name,'" added successfully')})}else await o(e.id,e),O({success:!0,message:'Ward "'.concat(e.name,'" updated successfully')});v(!1)}catch(e){O({success:!1,message:"Failed to ".concat("add"===b?"add":"update"," ward")})}};return A&&setTimeout(()=>{O(null)},5e3),(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column is-3",children:(0,l.jsxs)("div",{className:"box",children:[(0,l.jsx)("h3",{className:"title is-4 mb-4",children:"Wards"}),(0,l.jsx)("p",{className:"subtitle is-6 mb-5",children:"Manage hospital wards"}),(0,l.jsx)("div",{className:"buttons mb-4",children:(0,l.jsxs)("div",{className:"dropdown ".concat(H?"is-active":""),children:[(0,l.jsx)("div",{className:"dropdown-trigger",children:(0,l.jsxs)("button",{className:"button is-primary","aria-haspopup":"true","aria-controls":"department-dropdown-menu",onClick:()=>{W(!H),H||(B("all"),U("all"),J(""))},children:[(0,l.jsx)("span",{className:"icon",children:(0,l.jsx)("i",{className:"fas fa-plus"})}),(0,l.jsx)("span",{children:"Add Ward"}),(0,l.jsx)("span",{className:"icon is-small",children:(0,l.jsx)("i",{className:"fas fa-angle-down","aria-hidden":"true"})})]})}),(0,l.jsx)("div",{className:"dropdown-menu",id:"department-dropdown-menu",role:"menu",style:{width:"350px",maxHeight:"500px"},children:(0,l.jsxs)("div",{className:"dropdown-content",children:[(0,l.jsxs)("div",{className:"dropdown-item",children:[(0,l.jsx)("p",{className:"has-text-weight-bold mb-2",children:"Add Ward to Department"}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Organization"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-small is-fullwidth",children:(0,l.jsxs)("select",{value:F,onChange:e=>{B(e.target.value),U("all")},children:[(0,l.jsx)("option",{value:"all",children:"All Organizations"}),u.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Hospital"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-small is-fullwidth",children:(0,l.jsxs)("select",{value:L,onChange:e=>{U(e.target.value)},disabled:"all"===F,children:[(0,l.jsx)("option",{value:"all",children:"all"===F?"Select organization first":"All Hospitals"}),("all"===F?d:d.filter(e=>{let s=V[e.id];return s&&s.id===F})).map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Search Departments"}),(0,l.jsxs)("div",{className:"control has-icons-left",children:[(0,l.jsx)("input",{className:"input is-small",type:"text",placeholder:"Search departments...",value:G,onChange:e=>{J(e.target.value)}}),(0,l.jsx)("span",{className:"icon is-small is-left",children:(0,l.jsx)("i",{className:"fas fa-search"})})]})]})]}),(0,l.jsx)("hr",{className:"dropdown-divider"}),(0,l.jsxs)("div",{className:"dropdown-item",style:{maxHeight:"250px",overflow:"auto"},children:[Object.entries(X).filter(e=>{let[s]=e;return"all"===F||s===F}).map(e=>{let[s,a]=e;return(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("p",{className:"is-size-6 has-text-weight-bold has-background-light p-2",children:a.organization.name}),Object.entries(a.hospitals).filter(e=>{let[s]=e;return"all"===L||s===L}).map(e=>{let[s,a]=e,i=a.departments.filter(e=>{var s;if(!G)return!0;let a=G.toLowerCase();return e.name.toLowerCase().includes(a)||((null===(s=e.code)||void 0===s?void 0:s.toLowerCase())||"").includes(a)});return 0===i.length?null:(0,l.jsxs)("div",{className:"ml-3 mb-3",children:[(0,l.jsx)("p",{className:"is-size-7 has-text-weight-semibold has-text-grey-dark mb-1",children:a.hospital.name}),(0,l.jsx)("ul",{className:"menu-list ml-4",children:i.map(e=>(0,l.jsx)("li",{children:(0,l.jsxs)("a",{onClick:()=>{$(e.id),W(!1)},className:"is-flex is-align-items-center py-1",children:[(0,l.jsx)("span",{style:{backgroundColor:e.color||"#3273dc",width:"10px",height:"10px",borderRadius:"50%",display:"inline-block",marginRight:"8px"}}),(0,l.jsxs)("span",{children:[e.name,e.code&&(0,l.jsxs)("span",{className:"has-text-grey ml-1",children:["(",e.code,")"]})]})]})},e.id))})]},s)})]},s)}),(0===Object.keys(X).length||0===Object.entries(X).filter(e=>{let[s]=e;return"all"===F||s===F}).length)&&(0,l.jsx)("div",{className:"has-text-centered my-4",children:(0,l.jsx)("p",{className:"has-text-grey",children:"No departments found"})})]}),(0,l.jsx)("hr",{className:"dropdown-divider"}),(0,l.jsxs)("a",{className:"dropdown-item",onClick:()=>{$(),W(!1)},children:[(0,l.jsx)("span",{className:"icon mr-2",children:(0,l.jsx)("i",{className:"fas fa-plus-circle"})}),"Add ward without department"]})]})})]})}),(0,l.jsx)(I,{filter:n,setFilter:t})]})}),(0,l.jsxs)("div",{className:"column is-9",children:[A&&(0,l.jsx)(N,{type:A.success?"success":"danger",message:A.message,onClose:()=>O(null)}),s?(0,l.jsx)(j,{}):a?(0,l.jsxs)("div",{className:"notification is-danger",children:[(0,l.jsx)("button",{className:"delete",onClick:()=>{}}),a]}):(0,l.jsx)("div",{className:"columns is-multiline",children:0===e.length?(0,l.jsx)("div",{className:"column is-12",children:(0,l.jsx)("div",{className:"notification is-info",children:"No wards found. Try adjusting your filters or add a new ward."})}):e.map(e=>(0,l.jsx)("div",{className:"column is-4",children:(0,l.jsx)(P,{ward:e,onEdit:()=>Q(e),onDelete:()=>ee(e.id,e.name),onManageDepartments:()=>K(e)})},e.id))})]}),(0,l.jsx)(R,{isOpen:x,mode:b,ward:f,onClose:()=>v(!1),onSave:ea,departmentId:C}),(0,l.jsx)(q,{isOpen:k,ward:_,onClose:()=>{z(!1),D(null)}}),(0,l.jsx)(S,{isOpen:T.isOpen,title:"Delete Ward",message:'Are you sure you want to delete "'.concat(T.wardName,'"? This action cannot be undone.'),confirmText:"Delete Ward",cancelText:"Cancel",onConfirm:es,onCancel:()=>E({isOpen:!1,wardId:"",wardName:""}),confirmButtonClass:"is-danger"})]})}var B=a(4012);function L(e){let{filter:s,setFilter:a}=e,{organizations:i,hospitals:n,departments:t,staffRoles:c}=(0,B.gW)(),d=e=>{let{name:l,value:i,type:n}=e.target;"checkbox"===n?a({...s,[l]:e.target.checked}):a({...s,[l]:i})};return(0,l.jsxs)("aside",{className:"menu",children:[(0,l.jsx)("p",{className:"menu-label",children:"Filters"}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Organization"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-small is-fullwidth",children:(0,l.jsxs)("select",{name:"organization",value:s.organization,onChange:d,children:[(0,l.jsx)("option",{value:"all",children:"All Organizations"}),i.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Hospital"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-small is-fullwidth",children:(0,l.jsxs)("select",{name:"hospital",value:s.hospital,onChange:d,children:[(0,l.jsx)("option",{value:"all",children:"All Hospitals"}),n.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Department"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-small is-fullwidth",children:(0,l.jsxs)("select",{name:"department",value:s.department,onChange:d,children:[(0,l.jsx)("option",{value:"all",children:"All Departments"}),t.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Role"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-small is-fullwidth",children:(0,l.jsxs)("select",{name:"role",value:s.role,onChange:d,children:[(0,l.jsx)("option",{value:"all",children:"All Roles"}),c.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label is-small",children:"Search"}),(0,l.jsxs)("div",{className:"control has-icons-left",children:[(0,l.jsx)("input",{className:"input is-small",type:"text",placeholder:"Search by name, email...",name:"search",value:s.search,onChange:d}),(0,l.jsx)("span",{className:"icon is-small is-left",children:(0,l.jsx)("i",{className:"fas fa-search"})})]})]}),(0,l.jsx)("div",{className:"field",children:(0,l.jsx)("div",{className:"control",children:(0,l.jsxs)("label",{className:"checkbox is-small",children:[(0,l.jsx)("input",{type:"checkbox",name:"showInactive",checked:s.showInactive||!1,onChange:d}),"\xa0Show inactive staff"]})})})]})}var U=a(3233),G=a.n(U);function J(e){let{staff:s,onEdit:a,onDelete:i}=e,n=e=>{if(!e)return"N/A";let s=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(s)},t=e=>{if(!e)return"N/A";let s=new Date(e),a=Math.abs(new Date().getTime()-s.getTime()),l=Math.floor(a/315576e5),i=Math.floor(a%315576e5/2630016e3);return l>0?"".concat(l,"y ").concat(i,"m"):"".concat(i,"m")};return(0,l.jsx)("div",{className:"table-container",children:(0,l.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Name"}),(0,l.jsx)("th",{children:"Role"}),(0,l.jsx)("th",{children:"Department"}),(0,l.jsx)("th",{children:"Contact"}),(0,l.jsx)("th",{children:"Started"}),(0,l.jsx)("th",{children:"Status"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:s.map(e=>{var s;return(0,l.jsxs)("tr",{className:e.active?"":G().inactiveRow,children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"is-flex is-align-items-center",children:[(0,l.jsx)("span",{className:"icon mr-2",children:(0,l.jsx)("i",{className:"fas fa-user"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"has-text-weight-medium",children:e.name}),e.nhsBand&&(0,l.jsx)("p",{className:"is-size-7 has-text-grey",children:e.nhsBand})]})]})}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:(null===(s=e.primaryRole)||void 0===s?void 0:s.name)||"Unknown"}),e.departmentRole&&(0,l.jsx)("p",{className:"is-size-7 has-text-grey",children:e.departmentRole.name})]})}),(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:G().departmentTags,children:e.departments&&e.departments.length>0?e.departments.map((e,s)=>(0,l.jsx)("span",{className:"tag is-info is-light mr-1 mb-1",children:e.name},s)):(0,l.jsx)("span",{className:"has-text-grey-light",children:"No departments"})})}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"is-size-7",children:[(0,l.jsx)("span",{className:"icon is-small mr-1",children:(0,l.jsx)("i",{className:"fas fa-envelope"})}),e.email]}),e.phone&&(0,l.jsxs)("p",{className:"is-size-7",children:[(0,l.jsx)("span",{className:"icon is-small mr-1",children:(0,l.jsx)("i",{className:"fas fa-phone"})}),e.phone]})]})}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:n(e.startDate)}),(0,l.jsx)("p",{className:"is-size-7 has-text-grey",children:t(e.startDate)})]})}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{className:"tag ".concat(e.active?"is-success":"is-danger"),children:e.active?"Active":"Inactive"})}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"buttons are-small",children:[(0,l.jsx)("button",{className:"button is-info",title:"Edit",onClick:()=>a(e),children:(0,l.jsx)("span",{className:"icon is-small",children:(0,l.jsx)("i",{className:"fas fa-edit"})})}),(0,l.jsx)("button",{className:"button is-danger",title:"Delete",onClick:()=>i(e.id,e.name),children:(0,l.jsx)("span",{className:"icon is-small",children:(0,l.jsx)("i",{className:"fas fa-trash"})})})]})})]},e.id)})})]})})}function V(e){var s,a,n,t;let{isOpen:c,mode:d,staff:r,onClose:o,onSave:m}=e,{organizations:h,hospitals:u,departments:x,staffRoles:p}=(0,B.gW)(),j=(0,i.useMemo)(()=>({id:"",name:"",email:"",phone:"",primaryRole:{id:"",name:""},departmentRole:{id:"staff",name:"Staff"},nhsBand:"",organization:{id:"",name:""},defaultHospital:{id:"",name:""},departments:[],usualWorkingHours:{monday:{start:"09:00",end:"17:00"},tuesday:{start:"09:00",end:"17:00"},wednesday:{start:"09:00",end:"17:00"},thursday:{start:"09:00",end:"17:00"},friday:{start:"09:00",end:"17:00"},saturday:null,sunday:null},additionalTraining:[],startDate:new Date().toISOString().split("T")[0],active:!0}),[]),[N,v]=(0,i.useState)(j),[f,g]=(0,i.useState)(""),[b,y]=(0,i.useState)(!1),[C,w]=(0,i.useState)("basic"),[S,k]=(0,i.useState)([]),[z,_]=(0,i.useState)([]);(0,i.useEffect)(()=>{if("edit"===d&&r)v({...r}),r.departments&&k(r.departments.map(e=>e.id)),r.additionalTraining&&_(r.additionalTraining);else{let e={...j};h.length>0&&(e.organization={id:h[0].id,name:h[0].name}),u.length>0&&(e.defaultHospital={id:u[0].id,name:u[0].name}),p.length>0&&(e.primaryRole={id:p[0].id,name:p[0].name}),v(e),k([]),_([])}g(""),y(!1),w("basic")},[d,r,h,u,x,p,c,j]);let D=e=>{let{name:s,value:a,type:l}=e.target;if("organizationId"===s){let e=h.find(e=>e.id===a);e&&v({...N,organization:{id:e.id,name:e.name}})}else if("hospitalId"===s){let e=u.find(e=>e.id===a);e&&v({...N,defaultHospital:{id:e.id,name:e.name}})}else if("primaryRoleId"===s){let e=p.find(e=>e.id===a);e&&v({...N,primaryRole:{id:e.id,name:e.name}})}else if("departmentRoleId"===s){let e=B.iC.find(e=>e.id===a);e&&v({...N,departmentRole:{id:e.id,name:e.name}})}else if(s.startsWith("workingHours.")){var i;let e=s.split("."),l=e[1],n=e[2];v({...N,usualWorkingHours:{...N.usualWorkingHours,[l]:{...(null===(i=N.usualWorkingHours)||void 0===i?void 0:i[l])||{},[n]:a}}})}else v({...N,[s]:"checkbox"===l?e.target.checked:a})},A=e=>{let s;k(s=S.includes(e)?S.filter(s=>s!==e):[...S,e]);let a=s.map(e=>{let s=x.find(s=>s.id===e);return{id:e,name:(null==s?void 0:s.name)||"Unknown Department"}});v({...N,departments:a})},O=e=>{let s;_(s=z.includes(e)?z.filter(s=>s!==e):[...z,e]),v({...N,additionalTraining:s})},T=e=>{var s;(null===(s=N.usualWorkingHours)||void 0===s?void 0:s[e])?v({...N,usualWorkingHours:{...N.usualWorkingHours,[e]:null}}):v({...N,usualWorkingHours:{...N.usualWorkingHours,[e]:{start:"09:00",end:"17:00"}}})},E=()=>{var e,s,a,l;if(!N.name.trim())return g("Name is required"),w("basic"),!1;if(!N.email.trim())return g("Email is required"),w("basic"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N.email))return g("Please enter a valid email address"),w("basic"),!1;if(!(null===(e=N.primaryRole)||void 0===e?void 0:e.id))return g("Primary role is required"),w("basic"),!1;if(!(null===(s=N.organization)||void 0===s?void 0:s.id))return g("Organization is required"),w("basic"),!1;if(!(null===(a=N.defaultHospital)||void 0===a?void 0:a.id))return g("Default hospital is required"),w("basic"),!1;for(let e of["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]){let s=null===(l=N.usualWorkingHours)||void 0===l?void 0:l[e];if(s){if(!s.start||!s.end)return g("Please enter both start and end time for ".concat(e.charAt(0).toUpperCase()+e.slice(1))),w("schedule"),!1;if(s.start>=s.end)return g("End time must be after start time for ".concat(e.charAt(0).toUpperCase()+e.slice(1))),w("schedule"),!1}}return!0};return c?(0,l.jsxs)("div",{className:"modal ".concat(c?"is-active":""),children:[(0,l.jsx)("div",{className:"modal-background",onClick:o}),(0,l.jsxs)("div",{className:"modal-card",style:{maxWidth:"800px",width:"100%"},children:[(0,l.jsxs)("header",{className:"modal-card-head",children:[(0,l.jsx)("p",{className:"modal-card-title",children:"add"===d?"Add New Staff Member":"Edit Staff Member"}),(0,l.jsx)("button",{className:"delete","aria-label":"close",onClick:o,disabled:b})]}),(0,l.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),E()){y(!0);try{m(N)}catch(e){console.error("Error saving staff:",e),g("An error occurred while saving. Please try again."),y(!1)}}},children:[(0,l.jsxs)("section",{className:"modal-card-body",children:[f&&(0,l.jsxs)("div",{className:"notification is-danger",children:[(0,l.jsx)("button",{className:"delete",type:"button",onClick:()=>g("")}),f]}),(0,l.jsx)("div",{className:"tabs",children:(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{className:"basic"===C?"is-active":"",children:(0,l.jsxs)("a",{onClick:()=>w("basic"),children:[(0,l.jsx)("span",{className:"icon is-small",children:(0,l.jsx)("i",{className:"fas fa-user"})}),(0,l.jsx)("span",{children:"Basic Info"})]})}),(0,l.jsx)("li",{className:"departments"===C?"is-active":"",children:(0,l.jsxs)("a",{onClick:()=>w("departments"),children:[(0,l.jsx)("span",{className:"icon is-small",children:(0,l.jsx)("i",{className:"fas fa-hospital"})}),(0,l.jsx)("span",{children:"Departments"})]})}),(0,l.jsx)("li",{className:"schedule"===C?"is-active":"",children:(0,l.jsxs)("a",{onClick:()=>w("schedule"),children:[(0,l.jsx)("span",{className:"icon is-small",children:(0,l.jsx)("i",{className:"fas fa-calendar-alt"})}),(0,l.jsx)("span",{children:"Schedule"})]})}),(0,l.jsx)("li",{className:"training"===C?"is-active":"",children:(0,l.jsxs)("a",{onClick:()=>w("training"),children:[(0,l.jsx)("span",{className:"icon is-small",children:(0,l.jsx)("i",{className:"fas fa-graduation-cap"})}),(0,l.jsx)("span",{children:"Training"})]})})]})}),(0,l.jsxs)("div",{className:"basic"===C?"":"is-hidden",children:[(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Full Name"}),(0,l.jsxs)("div",{className:"control has-icons-left",children:[(0,l.jsx)("input",{className:"input",type:"text",name:"name",value:N.name,onChange:D,placeholder:"Enter full name",required:!0}),(0,l.jsx)("span",{className:"icon is-small is-left",children:(0,l.jsx)("i",{className:"fas fa-user"})})]})]})}),(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Email"}),(0,l.jsxs)("div",{className:"control has-icons-left",children:[(0,l.jsx)("input",{className:"input",type:"email",name:"email",value:N.email,onChange:D,placeholder:"Enter email address",required:!0}),(0,l.jsx)("span",{className:"icon is-small is-left",children:(0,l.jsx)("i",{className:"fas fa-envelope"})})]})]})})]}),(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Phone"}),(0,l.jsxs)("div",{className:"control has-icons-left",children:[(0,l.jsx)("input",{className:"input",type:"text",name:"phone",value:N.phone||"",onChange:D,placeholder:"Enter phone number"}),(0,l.jsx)("span",{className:"icon is-small is-left",children:(0,l.jsx)("i",{className:"fas fa-phone"})})]})]})}),(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Start Date"}),(0,l.jsxs)("div",{className:"control has-icons-left",children:[(0,l.jsx)("input",{className:"input",type:"date",name:"startDate",value:N.startDate||"",onChange:D}),(0,l.jsx)("span",{className:"icon is-small is-left",children:(0,l.jsx)("i",{className:"fas fa-calendar"})})]})]})})]}),(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Primary Role"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-fullwidth",children:(0,l.jsxs)("select",{name:"primaryRoleId",value:(null===(s=N.primaryRole)||void 0===s?void 0:s.id)||"",onChange:D,required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select a role"}),p.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]})}),(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Department Role"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-fullwidth",children:(0,l.jsx)("select",{name:"departmentRoleId",value:(null===(a=N.departmentRole)||void 0===a?void 0:a.id)||"staff",onChange:D,children:B.iC.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))})})})]})})]}),(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"NHS Band"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-fullwidth",children:(0,l.jsxs)("select",{name:"nhsBand",value:N.nhsBand||"",onChange:D,children:[(0,l.jsx)("option",{value:"",children:"Not Applicable"}),B.Wg.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})}),(0,l.jsx)("p",{className:"help",children:"Optional - Leave blank if not applicable"})]})}),(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsx)("div",{className:"field",children:(0,l.jsx)("div",{className:"control",children:(0,l.jsxs)("label",{className:"checkbox mt-5",children:[(0,l.jsx)("input",{type:"checkbox",name:"active",checked:N.active,onChange:D}),"\xa0Active"]})})})})]}),(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Organization"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-fullwidth",children:(0,l.jsxs)("select",{name:"organizationId",value:(null===(n=N.organization)||void 0===n?void 0:n.id)||"",onChange:D,required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select an organization"}),h.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]})}),(0,l.jsx)("div",{className:"column is-6",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Default Hospital"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("div",{className:"select is-fullwidth",children:(0,l.jsxs)("select",{name:"hospitalId",value:(null===(t=N.defaultHospital)||void 0===t?void 0:t.id)||"",onChange:D,required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select a hospital"}),u.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})})})]})})]})]}),(0,l.jsx)("div",{className:"departments"===C?"":"is-hidden",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Assigned Departments"}),(0,l.jsx)("p",{className:"help mb-3",children:"Select the departments this staff member works in"}),(0,l.jsx)("div",{className:"columns is-multiline",children:x.map(e=>(0,l.jsx)("div",{className:"column is-4",children:(0,l.jsx)("div",{className:"field",children:(0,l.jsx)("div",{className:"control",children:(0,l.jsxs)("label",{className:"checkbox",children:[(0,l.jsx)("input",{type:"checkbox",checked:S.includes(e.id),onChange:()=>A(e.id)}),(0,l.jsx)("span",{className:"ml-2",children:e.name})]})})})},e.id))}),0===S.length&&(0,l.jsx)("p",{className:"has-text-grey-light has-text-centered mt-4",children:"No departments selected"})]})}),(0,l.jsx)("div",{className:"schedule"===C?"":"is-hidden",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Usual Working Hours"}),(0,l.jsx)("p",{className:"help mb-3",children:"Set the staff member's typical working schedule"}),(0,l.jsxs)("table",{className:"table is-fullwidth",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Day"}),(0,l.jsx)("th",{children:"Start Time"}),(0,l.jsx)("th",{children:"End Time"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(e=>{var s,a,i;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"has-text-weight-medium",children:e.charAt(0).toUpperCase()+e.slice(1)}),(null===(s=N.usualWorkingHours)||void 0===s?void 0:s[e])?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("td",{children:(0,l.jsx)("input",{className:"input is-small",type:"time",name:"workingHours.".concat(e,".start"),value:(null===(a=N.usualWorkingHours[e])||void 0===a?void 0:a.start)||"",onChange:D})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{className:"input is-small",type:"time",name:"workingHours.".concat(e,".end"),value:(null===(i=N.usualWorkingHours[e])||void 0===i?void 0:i.end)||"",onChange:D})}),(0,l.jsx)("td",{children:(0,l.jsx)("button",{type:"button",className:"button is-small is-danger is-light",onClick:()=>T(e),children:"Set as day off"})})]}):(0,l.jsxs)("td",{colSpan:3,children:[(0,l.jsx)("span",{className:"tag is-light is-info",children:"Day Off"}),(0,l.jsx)("button",{type:"button",className:"button is-small is-info is-light ml-4",onClick:()=>T(e),children:"Set working hours"})]})]},e)})})]})]})}),(0,l.jsx)("div",{className:"training"===C?"":"is-hidden",children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Additional Training & Specializations"}),(0,l.jsx)("p",{className:"help mb-3",children:"Select all training and specializations completed by this staff member"}),(0,l.jsx)("div",{className:"columns is-multiline",children:B.lD.map(e=>(0,l.jsx)("div",{className:"column is-4",children:(0,l.jsx)("div",{className:"field",children:(0,l.jsx)("div",{className:"control",children:(0,l.jsxs)("label",{className:"checkbox",children:[(0,l.jsx)("input",{type:"checkbox",checked:z.includes(e.id),onChange:()=>O(e.id)}),(0,l.jsx)("span",{className:"ml-2",children:e.name})]})})})},e.id))}),0===z.length&&(0,l.jsx)("p",{className:"has-text-grey-light has-text-centered mt-4",children:"No additional training selected"})]})})]}),(0,l.jsxs)("footer",{className:"modal-card-foot",children:[(0,l.jsx)("button",{type:"submit",className:"button is-primary ".concat(b?"is-loading":""),disabled:b,children:"add"===d?"Add Staff Member":"Save Changes"}),(0,l.jsx)("button",{type:"button",className:"button",onClick:o,disabled:b,children:"Cancel"})]})]})]})]}):null}function Y(){let{staff:e,loading:s,error:a,filter:n,setFilter:t,addNewStaff:c,updateExistingStaff:d,removeStaff:r}=(0,B.gW)(),[o,m]=(0,i.useState)(!1),[h,u]=(0,i.useState)(null),[x,p]=(0,i.useState)("add"),[v,f]=(0,i.useState)(null),[g,b]=(0,i.useState)({isOpen:!1,staffId:"",staffName:""}),y=async()=>{try{await r(g.staffId),f({success:!0,message:'Staff member "'.concat(g.staffName,'" has been removed successfully')}),b({isOpen:!1,staffId:"",staffName:""})}catch(e){f({success:!1,message:"Failed to remove staff member"}),b({isOpen:!1,staffId:"",staffName:""})}},C=async e=>{try{if("add"===x){let{id:s,createdAt:a,updatedAt:l,...i}=e;await c(i),f({success:!0,message:'Staff member "'.concat(e.name,'" added successfully')})}else await d(e.id,e),f({success:!0,message:'Staff member "'.concat(e.name,'" updated successfully')});m(!1)}catch(e){f({success:!1,message:"Failed to ".concat("add"===x?"add":"update"," staff member")})}};return v&&setTimeout(()=>{f(null)},5e3),(0,l.jsxs)("div",{className:"columns",children:[(0,l.jsx)("div",{className:"column is-3",children:(0,l.jsxs)("div",{className:"box",children:[(0,l.jsx)("h3",{className:"title is-4 mb-4",children:"Staff Management"}),(0,l.jsx)("p",{className:"subtitle is-6 mb-5",children:"Manage pharmacy staff"}),(0,l.jsx)("div",{className:"buttons mb-4",children:(0,l.jsxs)("button",{className:"button is-primary",onClick:()=>{u(null),p("add"),m(!0)},children:[(0,l.jsx)("span",{className:"icon",children:(0,l.jsx)("i",{className:"fas fa-user-plus"})}),(0,l.jsx)("span",{children:"Add Staff Member"})]})}),(0,l.jsx)(L,{filter:n,setFilter:t})]})}),(0,l.jsxs)("div",{className:"column is-9",children:[v&&(0,l.jsx)(N,{type:v.success?"success":"danger",message:v.message,onClose:()=>f(null)}),s?(0,l.jsx)(j,{}):a?(0,l.jsxs)("div",{className:"notification is-danger",children:[(0,l.jsx)("button",{className:"delete",onClick:()=>{}}),a]}):(0,l.jsxs)("div",{className:"box",children:[(0,l.jsxs)("div",{className:"is-flex is-justify-content-space-between is-align-items-center mb-4",children:[(0,l.jsx)("h3",{className:"title is-4 mb-0",children:"Staff Directory"}),(0,l.jsxs)("span",{className:"tag is-info is-medium",children:[e.length," staff members"]})]}),0===e.length?(0,l.jsx)("div",{className:"notification is-info",children:"No staff members found. Try adjusting your filters or add a new staff member."}):(0,l.jsx)(J,{staff:e,onEdit:e=>{u(e),p("edit"),m(!0)},onDelete:(e,s)=>{b({isOpen:!0,staffId:e,staffName:s})}})]})]}),(0,l.jsx)(V,{isOpen:o,mode:x,staff:h,onClose:()=>m(!1),onSave:C}),(0,l.jsx)(S,{isOpen:g.isOpen,title:"Remove Staff Member",message:'Are you sure you want to remove "'.concat(g.staffName,'" from the system? This will deactivate their account.'),confirmText:"Remove Staff",cancelText:"Cancel",onConfirm:y,onCancel:()=>b({isOpen:!1,staffId:"",staffName:""}),confirmButtonClass:"is-danger"})]})}function X(){let[e,s]=(0,i.useState)("dashboard");return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n,{activeTab:e,setActiveTab:s}),"dashboard"===e&&(0,l.jsx)(o,{}),"organizations"===e&&(0,l.jsx)(v,{}),"hospitals"===e&&(0,l.jsx)(k,{}),"departments"===e&&(0,l.jsx)(E,{}),"wards"===e&&(0,l.jsx)(F,{}),"staff"===e&&(0,l.jsx)(Y,{}),"workloads"===e&&(0,l.jsxs)("div",{className:"notification is-info",children:[(0,l.jsx)("p",{className:"title is-4",children:"Workload Management"}),(0,l.jsx)("p",{children:"This section would contain the daily workload tracking and assignments"})]}),"reports"===e&&(0,l.jsxs)("div",{className:"notification is-info",children:[(0,l.jsx)("p",{className:"title is-4",children:"Reports"}),(0,l.jsx)("p",{children:"This section would contain various reports and analytics based on the workload data"})]}),"audit"===e&&(0,l.jsxs)("div",{className:"notification is-info",children:[(0,l.jsx)("p",{className:"title is-4",children:"Audit Logs"}),(0,l.jsx)("p",{children:"This section would display the audit trail of all actions in the system"})]})]})}},3153:e=>{e.exports={departmentCard:"DepartmentManagement_departmentCard__6O0U_","card-content":"DepartmentManagement_card-content__JBlGm",hierarchyList:"DepartmentManagement_hierarchyList__DfqIM",hierarchyItem:"DepartmentManagement_hierarchyItem__pRT9Y",hierarchyChildren:"DepartmentManagement_hierarchyChildren__BXCrM",breadcrumb:"DepartmentManagement_breadcrumb__0zkVW",colorSwatch:"DepartmentManagement_colorSwatch__AWZLV"}},3233:e=>{e.exports={staffCard:"StaffManagement_staffCard__SAedI","card-content":"StaffManagement_card-content__O_4Bx",departmentTags:"StaffManagement_departmentTags__V1Y5u",profileImage:"StaffManagement_profileImage__twwdU",trainingBadge:"StaffManagement_trainingBadge__Vu3_1",certified:"StaffManagement_certified__SYBX6",inactiveRow:"StaffManagement_inactiveRow__XYrOE",scheduleTable:"StaffManagement_scheduleTable__qPR0L",dayOff:"StaffManagement_dayOff__Me_di",departmentPill:"StaffManagement_departmentPill__jSm_C",nhsBand:"StaffManagement_nhsBand__mFRb9",trainingSection:"StaffManagement_trainingSection__z7JZb",trainingItem:"StaffManagement_trainingItem__UZAUK",active:"StaffManagement_active__qeDnU",weekSchedule:"StaffManagement_weekSchedule__EsT9R",dayBlock:"StaffManagement_dayBlock__vCI6v",workingPeriod:"StaffManagement_workingPeriod__Mfv9m"}},3741:e=>{e.exports={wardCard:"WardManagement_wardCard__oMl_N","card-content":"WardManagement_card-content__70Mlk",departmentIndicator:"WardManagement_departmentIndicator__ur3Fp",wardList:"WardManagement_wardList__upHej",wardItem:"WardManagement_wardItem__FVayG",bedCountBadge:"WardManagement_bedCountBadge__CMloR",departmentSelector:"WardManagement_departmentSelector__Fl1_M",departmentSelectorItem:"WardManagement_departmentSelectorItem__IIqoe",departmentColor:"WardManagement_departmentColor__BAGLj"}},8017:e=>{e.exports={hoverCard:"HospitalManagement_hoverCard__HN7l_",cardIcon:"HospitalManagement_cardIcon__2RlNG",cardFooter:"HospitalManagement_cardFooter__EbAEH",cardFooterItem:"HospitalManagement_cardFooterItem__Bry_T"}}},e=>{var s=s=>e(e.s=s);e.O(0,[533,992,888,645,811,441,684,358],()=>s(1003)),_N_E=e.O()}]);